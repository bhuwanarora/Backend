<% if @user_exists %>
	<input id="newPassword" placeholder="Enter your password" />
	<input type="hidden" value="<%= @user_id %>" id="userId"/>
	<button id="SubmitPassword">Submit</button>
<% end %>
<div id="passwordResetStatus">
	<%= @message %>
</div>
<script>
	$(document).ready(function(){
		$('#SubmitPassword').on('click', function(){
			var data = "id="+$('#userId').val()+"&p="+$('#newPassword').val();
			$.ajax({
				url: "<%= save_password_path %>",
				data: data,
				success: function(data, textStatus, jqXHR){
					$('#passwordResetStatus').html(data);
					setInterval(function(){
						window.location.url = "http://www.readersdoor.com/";
					}, 3000);
				},
				error: function(jqXHR, textStatus, errorThrown){
					$('#passwordResetStatus').html(errorThrown);
				}
			})
		});
	});
</script>
<style>
	#newPassword{
		width: 200px;
		padding: 5px;
		margin: 5px;
	}

	#newPassword:focus{
		outline: 2px solid #427fed;
	}

	#SubmitPassword{
		color: #fff;
	    border-radius: 2px;
	    box-shadow: none;
	    background-color: #4d90fe;
	    background-image: -webkit-linear-gradient(top,#4d90fe,#4787ed);
	    background-image: -moz-linear-gradient(top,#4d90fe,#4787ed);
	    background-image: -ms-linear-gradient(top,#4d90fe,#4787ed);
	    background-image: -o-linear-gradient(top,#4d90fe,#4787ed);
	    background-image: linear-gradient(top,#4d90fe,#4787ed);
	    border: 1px solid #3079ed;
	    cursor: pointer;
	    padding: 6px 20px;
	}

	#SubmitPassword:hover{
		background-color: #4d90fe;
	    background-image: -webkit-linear-gradient(top,#4d90fe,#3A6CBB);
	    background-image: -moz-linear-gradient(top,#4d90fe,#3A6CBB);
	    background-image: -ms-linear-gradient(top,#4d90fe,#3A6CBB);
	    background-image: -o-linear-gradient(top,#4d90fe,#3A6CBB);
	    background-image: linear-gradient(top,#4d90fe,#3A6CBB);
	    border: 1px solid #2664C7;
	}

	#SubmitPassword:active{
		background-color: #2570EB;
	    background-image: -webkit-linear-gradient(top,#2570EB,#3A6CBB);
	    background-image: -moz-linear-gradient(top,#2570EB,#3A6CBB);
	    background-image: -ms-linear-gradient(top,#2570EB,#3A6CBB);
	    background-image: -o-linear-gradient(top,#2570EB,#3A6CBB);
	    background-image: linear-gradient(top,#2570EB,#3A6CBB);
	    border: 1px solid #2664C7;
	}

</style>