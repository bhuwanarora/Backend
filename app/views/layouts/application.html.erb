<!DOCTYPE html>
<html ng-app='websiteApp'>
  <head>
    <title>ReadersDoor</title>
    <%= javascript_include_tag *Dir[Rails.root.join("app/assets/javascripts/angular/**/*.js")] %>
  </head>

  <body ng-controller="websiteAppController" ng-keypress="search()" ng-mouseout="showFeebackForm()">
    <div class="background_mask"></div>
    <div ng-include 
          src="'assets/angular/widgets/partials/search.html'" 
          ng-show="searching"
          ng-click="stopSearching($event)"></div>
    <div msd-wheel="bindHorizontalScroll($event, $delta, $deltaX, $deltaY)" 
        ng-animate="msd-wheel" 
        ng-hide="searching"
        ng-show="!searching">
      <% unless response.as_json["request"].as_json["fullpath"] == "/test" || 
                (response.as_json["request"].as_json["fullpath"].include? "/coming_soon") || 
                response.as_json["request"].as_json["fullpath"] == "/" || 
                response.as_json["request"].as_json["fullpath"] == "/website" %>
        <%#= render :partial => "shared/header"%>
      <% end %>
      <%= yield %>
      <%= javascript_include_tag "application", "data-turbolinks-track" => true %>
      <%= stylesheet_link_tag    "application", media: "all", "data-turbolinks-track" => true %>

      <%= csrf_meta_tags %>
      <%= render :partial => "shared/favicon" %>
      <%= render :partial => "shared/meta_tags"%>
      <%#= render :partial => "shared/responsive" %>
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-35051501-1', 'readersdoor.com');
        ga('send', 'pageview');
      </script>
    </div>
  </body>
</html>