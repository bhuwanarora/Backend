<!DOCTYPE html>
<!-- saved from url=(0094)https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md -->
<html class="   "><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    
    <title>elasticsearch-rails/elasticsearch-model/README.md at master · elasticsearch/elasticsearch-rails</title>
    <link rel="search" type="application/opensearchdescription+xml" href="https://github.com/opensearch.xml" title="GitHub">
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <link rel="apple-touch-icon" sizes="57x57" href="https://github.com/apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://github.com/apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://github.com/apple-touch-icon-144.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://github.com/apple-touch-icon-144.png">
    <meta property="fb:app_id" content="1401488693436528">

      <meta content="@github" name="twitter:site"><meta content="summary" name="twitter:card"><meta content="elasticsearch/elasticsearch-rails" name="twitter:title"><meta content="elasticsearch-rails - Elasticsearch integrations for ActiveModel/Record and Ruby on Rails" name="twitter:description"><meta content="https://avatars0.githubusercontent.com/u/141304?s=400" name="twitter:image:src">
<meta content="GitHub" property="og:site_name"><meta content="object" property="og:type"><meta content="https://avatars0.githubusercontent.com/u/141304?s=400" property="og:image"><meta content="elasticsearch/elasticsearch-rails" property="og:title"><meta content="https://github.com/elasticsearch/elasticsearch-rails" property="og:url"><meta content="elasticsearch-rails - Elasticsearch integrations for ActiveModel/Record and Ruby on Rails" property="og:description">

    <link rel="assets" href="https://github.global.ssl.fastly.net/">
    <link rel="conduit-xhr" href="https://ghconduit.com:25035/">
    <link rel="xhr-socket" href="https://github.com/_sockets">

    <meta name="msapplication-TileImage" content="/windows-tile.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="selected-link" value="repo_source" data-pjax-transient="">
    <meta content="collector.githubapp.com" name="octolytics-host"><meta content="collector-cdn.github.com" name="octolytics-script-host"><meta content="github" name="octolytics-app-id"><meta content="A2F3AC5C:0AB7:51AAC79:535155CC" name="octolytics-dimension-request_id"><meta content="1976061" name="octolytics-actor-id"><meta content="bhuwan-arora" name="octolytics-actor-login"><meta content="1b92873040512c9ae7584c63ac82613b9787e31ecb41dd592c6d01ec3dce9edc" name="octolytics-actor-hash">
    

    
    
    <link rel="icon" type="image/x-icon" href="https://github.global.ssl.fastly.net/favicon.ico">

    <meta content="authenticity_token" name="csrf-param">
<meta content="6oZJlcIRzzimgSxLyDxmLd/+PoUUt6hPHjwkCO8XmNY=" name="csrf-token">

    <link href="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/github-96f104cca04e50f916e268ebf2d3f7b009e1405e.css" media="all" rel="stylesheet" type="text/css">
    <link href="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/github2-57dd48a565424fa05bdd0a122918d0d42919021b.css" media="all" rel="stylesheet" type="text/css">
    


        <script crossorigin="anonymous" src="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/frameworks-bdc08296a41dcc580bdf91802b61d36f6e37bbdb.js" type="text/javascript"></script>
        <script async="async" crossorigin="anonymous" src="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/github-d5daf1651a98e228ce078d4c2a72a4ec0764c65d.js" type="text/javascript"></script>
        
        
      <meta http-equiv="x-pjax-version" content="a9b0b33b254b52d35159b8aa1cc1c088">

        <link data-pjax-transient="" rel="permalink" href="https://github.com/elasticsearch/elasticsearch-rails/blob/cc53850add08e761b1d31fe72b7164db53347d06/elasticsearch-model/README.md">

  <meta name="description" content="elasticsearch-rails - Elasticsearch integrations for ActiveModel/Record and Ruby on Rails">

  <meta content="141304" name="octolytics-dimension-user_id"><meta content="elasticsearch" name="octolytics-dimension-user_login"><meta content="14238949" name="octolytics-dimension-repository_id"><meta content="elasticsearch/elasticsearch-rails" name="octolytics-dimension-repository_nwo"><meta content="true" name="octolytics-dimension-repository_public"><meta content="false" name="octolytics-dimension-repository_is_fork"><meta content="14238949" name="octolytics-dimension-repository_network_root_id"><meta content="elasticsearch/elasticsearch-rails" name="octolytics-dimension-repository_network_root_nwo">
  <link href="https://github.com/elasticsearch/elasticsearch-rails/commits/master.atom" rel="alternate" title="Recent Commits to elasticsearch-rails:master" type="application/atom+xml">

  <script type="text/javascript" async="" src="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/ga.js"></script><script type="text/javascript" async="" src="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/api.js"></script><link type="text/css" rel="stylesheet" href="chrome-extension://cpngackimfmofbokmjmljamhdncknpmg/style.css"><script type="text/javascript" charset="utf-8" src="chrome-extension://cpngackimfmofbokmjmljamhdncknpmg/js/page_context.js"></script><meta name="chromesniffer" id="chromesniffer_meta" content="{&quot;Google Analytics&quot;:-1,&quot;jQuery&quot;:&quot;2.1.0 -ajax/jsonp,-deprecated,-exports/amd,-wrap&quot;}"><script type="text/javascript" src="chrome-extension://homgcnaoacgigpkkljjjekpignblkeae/detector.js"></script><style>[touch-action="none"]{ -ms-touch-action: none; touch-action: none; }[touch-action="pan-x"]{ -ms-touch-action: pan-x; touch-action: pan-x; }[touch-action="pan-y"]{ -ms-touch-action: pan-y; touch-action: pan-y; }[touch-action="scroll"],[touch-action="pan-x pan-y"],[touch-action="pan-y pan-x"]{ -ms-touch-action: pan-x pan-y; touch-action: pan-x pan-y; }</style><style id="clearly_highlighting_css" type="text/css">/* selection */ html.clearly_highlighting_enabled ::-moz-selection { background: rgba(246, 238, 150, 0.99); } html.clearly_highlighting_enabled ::selection { background: rgba(246, 238, 150, 0.99); } /* cursor */ html.clearly_highlighting_enabled {    /* cursor and hot-spot position -- requires a default cursor, after the URL one */    cursor: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--cursor.png") 14 16, text; } /* highlight tag */ em.clearly_highlight_element {    font-style: inherit !important; font-weight: inherit !important;    background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--yellow.png");    background-repeat: repeat-x; background-position: top left; background-size: 100% 100%; } /* the delete-buttons are positioned relative to this */ em.clearly_highlight_element.clearly_highlight_first { position: relative; } /* delete buttons */ em.clearly_highlight_element a.clearly_highlight_delete_element {    display: none; cursor: pointer;    padding: 0; margin: 0; line-height: 0;    position: absolute; width: 34px; height: 34px; left: -17px; top: -17px;    background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--delete-sprite.png"); background-repeat: no-repeat; background-position: 0px 0px; } em.clearly_highlight_element a.clearly_highlight_delete_element:hover { background-position: -34px 0px; } /* retina */ @media (min--moz-device-pixel-ratio: 2), (-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) {    em.clearly_highlight_element { background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--yellow@2x.png"); }    em.clearly_highlight_element a.clearly_highlight_delete_element { background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--delete-sprite@2x.png"); background-size: 68px 34px; } } </style></head>


  <body class="logged_in  env-production macintosh vis-public page-blob" screen_capture_injected="true">
    <a href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a>
    <div class="wrapper">
      
      
      
      


      <div class="header header-logged-in true">
  <div class="container clearfix">

    <a class="header-logo-invertocat" href="https://github.com/">
  <span class="mega-octicon octicon-mark-github"></span>
</a>

    
    <a href="https://github.com/notifications" aria-label="You have unread notifications" class="notification-indicator tooltipped tooltipped-s" data-gotokey="n">
        <span class="mail-status unread"></span>
</a>

      <div class="command-bar js-command-bar  in-repository">
          <form accept-charset="UTF-8" action="https://github.com/search" class="command-bar-form" id="top_search_form" method="get">

<div class="commandbar">
  <span class="message"></span>
  <input type="text" data-hotkey="/ s" name="q" id="js-command-bar-field" placeholder="Search or type a command" tabindex="1" autocapitalize="off" data-username="bhuwan-arora" data-repo="elasticsearch/elasticsearch-rails" data-branch="master" data-sha="bf6c368d3bf1c8b4cd37809fd089457e2ffc87d6">
  <div class="display hidden"></div>
</div>

    <input type="hidden" name="nwo" value="elasticsearch/elasticsearch-rails">

    <div class="select-menu js-menu-container js-select-menu search-context-select-menu">
      <span class="minibutton select-menu-button js-menu-target" role="button" aria-haspopup="true">
        <span class="js-select-button">This repository</span>
      </span>

      <div class="select-menu-modal-holder js-menu-content js-navigation-container" aria-hidden="true">
        <div class="select-menu-modal">

          <div class="select-menu-item js-navigation-item js-this-repository-navigation-item selected">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" class="js-search-this-repository" name="search_target" value="repository" checked="checked">
            <div class="select-menu-item-text js-select-button-text">This repository</div>
          </div> <!-- /.select-menu-item -->

          <div class="select-menu-item js-navigation-item js-all-repositories-navigation-item">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" name="search_target" value="global">
            <div class="select-menu-item-text js-select-button-text">All repositories</div>
          </div> <!-- /.select-menu-item -->

        </div>
      </div>
    </div>

  <span class="help tooltipped tooltipped-s" aria-label="Show command bar help">
    <span class="octicon octicon-question"></span>
  </span>


  <input type="hidden" name="ref" value="cmdform">

</form>
        <ul class="top-nav">
          <li class="explore"><a href="https://github.com/explore">Explore</a></li>
            <li><a href="https://gist.github.com/">Gist</a></li>
            <li><a href="https://github.com/blog">Blog</a></li>
          <li><a href="https://help.github.com/">Help</a></li>
        </ul>
      </div>

    


  <ul id="user-links">
    <li>
      <a href="https://github.com/bhuwan-arora" class="name">
        <img alt="bhuwan-arora" class=" js-avatar" data-user="1976061" height="20" src="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/1976061" width="20"> bhuwan-arora
      </a>
    </li>

    <li class="new-menu dropdown-toggle js-menu-container">
      <a href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#" class="js-menu-target tooltipped tooltipped-s" aria-label="Create new...">
        <span class="octicon octicon-plus"></span>
        <span class="dropdown-arrow"></span>
      </a>

      <div class="new-menu-content js-menu-content">
      </div>
    </li>

    <li>
      <a href="https://github.com/settings/profile" id="account_settings" class="tooltipped tooltipped-s" aria-label="Account settings ">
        <span class="octicon octicon-tools"></span>
      </a>
    </li>
    <li>
      <form action="https://github.com/logout" method="post">
        <button class="sign-out-button tooltipped tooltipped-s" aria-label="Sign out">
          <span class="octicon octicon-log-out"></span>
        </button>
      </form>
    </li>

  </ul>

<div class="js-new-dropdown-contents hidden">
  

<ul class="dropdown-menu">
  <li>
    <a href="https://github.com/new"><span class="octicon octicon-repo-create"></span> New repository</a>
  </li>
  <li>
    <a href="https://github.com/organizations/new"><span class="octicon octicon-organization"></span> New organization</a>
  </li>


    <li class="section-title">
      <span title="elasticsearch/elasticsearch-rails">This repository</span>
    </li>
      <li>
        <a href="https://github.com/elasticsearch/elasticsearch-rails/issues/new"><span class="octicon octicon-issue-opened"></span> New issue</a>
      </li>
</ul>

</div>


    
  </div>
</div>

      

        



      <div id="start-of-content" class="accessibility-aid"></div>
          <div class="site" itemscope="" itemtype="http://schema.org/WebPage">
    
    <div class="pagehead repohead instapaper_ignore readability-menu">
      <div class="container">
        

<ul class="pagehead-actions">

    <li class="subscription">
      <form accept-charset="UTF-8" action="https://github.com/notifications/subscribe" class="js-social-container" data-autosubmit="true" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="authenticity_token" type="hidden" value="6oZJlcIRzzimgSxLyDxmLd/+PoUUt6hPHjwkCO8XmNY="></div>  <input id="repository_id" name="repository_id" type="hidden" value="14238949">

    <div class="select-menu js-menu-container js-select-menu">
      <a class="social-count js-social-count" href="https://github.com/elasticsearch/elasticsearch-rails/watchers">
        49
      </a>
      <span class="minibutton select-menu-button with-count js-menu-target" role="button" tabindex="0" aria-haspopup="true">
        <span class="js-select-button">
          <span class="octicon octicon-eye-watch"></span>
          Watch
        </span>
      </span>

      <div class="select-menu-modal-holder">
        <div class="select-menu-modal subscription-menu-modal js-menu-content" aria-hidden="true">
          <div class="select-menu-header">
            <span class="select-menu-title">Notification status</span>
            <span class="octicon octicon-remove-close js-menu-close"></span>
          </div> <!-- /.select-menu-header -->

          <div class="select-menu-list js-navigation-container" role="menu">

            <div class="select-menu-item js-navigation-item selected" role="menuitem" tabindex="0">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <div class="select-menu-item-text">
                <input checked="checked" id="do_included" name="do" type="radio" value="included">
                <h4>Not watching</h4>
                <span class="description">You only receive notifications for conversations in which you participate or are @mentioned.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="octicon octicon-eye-watch"></span>
                  Watch
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

            <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
              <span class="select-menu-item-icon octicon octicon octicon-check"></span>
              <div class="select-menu-item-text">
                <input id="do_subscribed" name="do" type="radio" value="subscribed">
                <h4>Watching</h4>
                <span class="description">You receive notifications for all conversations in this repository.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="octicon octicon-eye-unwatch"></span>
                  Unwatch
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

            <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <div class="select-menu-item-text">
                <input id="do_ignore" name="do" type="radio" value="ignore">
                <h4>Ignoring</h4>
                <span class="description">You do not receive any notifications for conversations in this repository.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="octicon octicon-mute"></span>
                  Stop ignoring
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

          </div> <!-- /.select-menu-list -->

        </div> <!-- /.select-menu-modal -->
      </div> <!-- /.select-menu-modal-holder -->
    </div> <!-- /.select-menu -->

</form>
    </li>

  <li>
  

  <div class="js-toggler-container js-social-container starring-container ">
    <a href="https://github.com/elasticsearch/elasticsearch-rails/unstar" class="minibutton with-count js-toggler-target star-button starred" aria-label="Unstar this repository" title="Unstar elasticsearch/elasticsearch-rails" data-remote="true" data-method="post" rel="nofollow">
      <span class="octicon octicon-star-delete"></span><span class="text">Unstar</span>
    </a>

    <a href="https://github.com/elasticsearch/elasticsearch-rails/star" class="minibutton with-count js-toggler-target star-button unstarred" aria-label="Star this repository" title="Star elasticsearch/elasticsearch-rails" data-remote="true" data-method="post" rel="nofollow">
      <span class="octicon octicon-star"></span><span class="text">Star</span>
    </a>

      <a class="social-count js-social-count" href="https://github.com/elasticsearch/elasticsearch-rails/stargazers">
        399
      </a>
  </div>

  </li>


        <li>
          <a href="https://github.com/elasticsearch/elasticsearch-rails/fork" class="minibutton with-count js-toggler-target fork-button lighter tooltipped-n" title="Fork your own copy of elasticsearch/elasticsearch-rails to your account" aria-label="Fork your own copy of elasticsearch/elasticsearch-rails to your account" rel="nofollow" data-method="post">
            <span class="octicon octicon-git-branch-create"></span><span class="text">Fork</span>
          </a>
          <a href="https://github.com/elasticsearch/elasticsearch-rails/network" class="social-count">54</a>
        </li>


</ul>

        <h1 itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
          <span class="repo-label"><span>public</span></span>
          <span class="mega-octicon octicon-repo"></span>
          <span class="author"><a href="https://github.com/elasticsearch" class="url fn" itemprop="url" rel="author"><span itemprop="title">elasticsearch</span></a></span><!--
       --><span class="path-divider">/</span><!--
       --><strong><a href="https://github.com/elasticsearch/elasticsearch-rails" class="js-current-repository js-repo-home-link">elasticsearch-rails</a></strong>

          <span class="page-context-loader">
            <img alt="Octocat-spinner-32" height="16" src="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/octocat-spinner-32.gif" width="16">
          </span>

        </h1>
      </div><!-- /.container -->
    </div><!-- /.repohead -->

    <div class="container">
      <div class="repository-with-sidebar repo-container new-discussion-timeline js-new-discussion-timeline">
        <div class="repository-sidebar clearfix">
            

<div class="sunken-menu vertical-right repo-nav js-repo-nav js-repository-container-pjax js-octicon-loaders">
  <div class="sunken-menu-contents">
    <ul class="sunken-menu-group">
      <li class="tooltipped tooltipped-w" aria-label="Code">
        <a href="https://github.com/elasticsearch/elasticsearch-rails" aria-label="Code" class="selected js-selected-navigation-item sunken-menu-item" data-gotokey="c" data-pjax="true" data-selected-links="repo_source repo_downloads repo_commits repo_tags repo_branches /elasticsearch/elasticsearch-rails">
          <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/octocat-spinner-32.gif" width="16">
</a>      </li>

        <li class="tooltipped tooltipped-w" aria-label="Issues">
          <a href="https://github.com/elasticsearch/elasticsearch-rails/issues" aria-label="Issues" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-gotokey="i" data-selected-links="repo_issues /elasticsearch/elasticsearch-rails/issues">
            <span class="octicon octicon-issue-opened"></span> <span class="full-word">Issues</span>
            <span class="counter">8</span>
            <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/octocat-spinner-32.gif" width="16">
</a>        </li>

      <li class="tooltipped tooltipped-w" aria-label="Pull Requests">
        <a href="https://github.com/elasticsearch/elasticsearch-rails/pulls" aria-label="Pull Requests" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-gotokey="p" data-selected-links="repo_pulls /elasticsearch/elasticsearch-rails/pulls">
            <span class="octicon octicon-git-pull-request"></span> <span class="full-word">Pull Requests</span>
            <span class="counter">4</span>
            <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/octocat-spinner-32.gif" width="16">
</a>      </li>


        <li class="tooltipped tooltipped-w" aria-label="Wiki">
          <a href="https://github.com/elasticsearch/elasticsearch-rails/wiki" aria-label="Wiki" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="repo_wiki /elasticsearch/elasticsearch-rails/wiki">
            <span class="octicon octicon-book"></span> <span class="full-word">Wiki</span>
            <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/octocat-spinner-32.gif" width="16">
</a>        </li>
    </ul>
    <div class="sunken-menu-separator"></div>
    <ul class="sunken-menu-group">

      <li class="tooltipped tooltipped-w" aria-label="Pulse">
        <a href="https://github.com/elasticsearch/elasticsearch-rails/pulse" aria-label="Pulse" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="pulse /elasticsearch/elasticsearch-rails/pulse">
          <span class="octicon octicon-pulse"></span> <span class="full-word">Pulse</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/octocat-spinner-32.gif" width="16">
</a>      </li>

      <li class="tooltipped tooltipped-w" aria-label="Graphs">
        <a href="https://github.com/elasticsearch/elasticsearch-rails/graphs" aria-label="Graphs" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="repo_graphs repo_contributors /elasticsearch/elasticsearch-rails/graphs">
          <span class="octicon octicon-graph"></span> <span class="full-word">Graphs</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/octocat-spinner-32.gif" width="16">
</a>      </li>

      <li class="tooltipped tooltipped-w" aria-label="Network">
        <a href="https://github.com/elasticsearch/elasticsearch-rails/network" aria-label="Network" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-selected-links="repo_network /elasticsearch/elasticsearch-rails/network">
          <span class="octicon octicon-git-branch"></span> <span class="full-word">Network</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/octocat-spinner-32.gif" width="16">
</a>      </li>
    </ul>


  </div>
</div>

              <div class="only-with-full-nav">
                

  

<div class="clone-url " data-protocol-type="http" data-url="/users/set_protocol?protocol_selector=http&amp;protocol_type=clone">
  <h3><strong>HTTPS</strong> clone URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field" value="https://github.com/elasticsearch/elasticsearch-rails.git" readonly="readonly">

    <span aria-label="copy to clipboard" class="js-zeroclipboard url-box-clippy minibutton zeroclipboard-button" data-clipboard-text="https://github.com/elasticsearch/elasticsearch-rails.git" data-copied-hint="copied!"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>

  

<div class="clone-url open" data-protocol-type="ssh" data-url="/users/set_protocol?protocol_selector=ssh&amp;protocol_type=clone">
  <h3><strong>SSH</strong> clone URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field" value="git@github.com:elasticsearch/elasticsearch-rails.git" readonly="readonly">

    <span aria-label="copy to clipboard" class="js-zeroclipboard url-box-clippy minibutton zeroclipboard-button" data-clipboard-text="git@github.com:elasticsearch/elasticsearch-rails.git" data-copied-hint="copied!"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>

  

<div class="clone-url " data-protocol-type="subversion" data-url="/users/set_protocol?protocol_selector=subversion&amp;protocol_type=clone">
  <h3><strong>Subversion</strong> checkout URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field" value="https://github.com/elasticsearch/elasticsearch-rails" readonly="readonly">

    <span aria-label="copy to clipboard" class="js-zeroclipboard url-box-clippy minibutton zeroclipboard-button" data-clipboard-text="https://github.com/elasticsearch/elasticsearch-rails" data-copied-hint="copied!"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>


<p class="clone-options">You can clone with
      <a href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#" class="js-clone-selector" data-protocol="http">HTTPS</a>,
      <a href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#" class="js-clone-selector" data-protocol="ssh">SSH</a>,
      or <a href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#" class="js-clone-selector" data-protocol="subversion">Subversion</a>.
  <span class="help tooltipped tooltipped-n" aria-label="Get help on which URL is right for you.">
    <a href="https://help.github.com/articles/which-remote-url-should-i-use">
    <span class="octicon octicon-question"></span>
    </a>
  </span>
</p>

  <a href="http://mac.github.com/" data-url="github-mac://openRepo/https://github.com/elasticsearch/elasticsearch-rails" class="minibutton sidebar-button js-conduit-rewrite-url" title="Save elasticsearch/elasticsearch-rails to your computer and use it in GitHub Desktop." aria-label="Save elasticsearch/elasticsearch-rails to your computer and use it in GitHub Desktop.">
    <span class="octicon octicon-device-desktop"></span>
    Clone in Desktop
  </a>


                <a href="https://github.com/elasticsearch/elasticsearch-rails/archive/master.zip" class="minibutton sidebar-button" aria-label="Download elasticsearch/elasticsearch-rails as a zip file" title="Download elasticsearch/elasticsearch-rails as a zip file" rel="nofollow">
                  <span class="octicon octicon-cloud-download"></span>
                  Download ZIP
                </a>
              </div>
        </div><!-- /.repository-sidebar -->

        <div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container="">
          


<!-- blob contrib key: blob_contributors:v21:d6c9277ff6a357a397fa41f5c884f05e -->

<p title="This is a placeholder element" class="js-history-link-replace hidden"></p>

<a href="https://github.com/elasticsearch/elasticsearch-rails/find/master" data-pjax="" data-hotkey="t" class="js-show-file-finder" style="display:none">Show File Finder</a>

<div class="file-navigation">
  

<div class="select-menu js-menu-container js-select-menu">
  <span class="minibutton select-menu-button js-menu-target" data-hotkey="w" data-master-branch="master" data-ref="master" role="button" aria-label="Switch branches or tags" tabindex="0" aria-haspopup="true">
    <span class="octicon octicon-git-branch"></span>
    <i>branch:</i>
    <span class="js-select-button">master</span>
  </span>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax="" aria-hidden="true">

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <span class="select-menu-title">Switch branches/tags</span>
        <span class="octicon octicon-remove-close js-menu-close"></span>
      </div> <!-- /.select-menu-header -->

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#" data-tab-filter="branches" class="js-select-menu-tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#" data-tab-filter="tags" class="js-select-menu-tab">Tags</a>
            </li>
          </ul>
        </div><!-- /.select-menu-tabs -->
      </div><!-- /.select-menu-filters -->

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item selected">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails.html" data-name="master" data-skip-pjax="true" rel="nofollow" class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target" title="master">master</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="https://github.com/elasticsearch/elasticsearch-rails/blob/persistence/elasticsearch-model/README.md" data-name="persistence" data-skip-pjax="true" rel="nofollow" class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target" title="persistence">persistence</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="https://github.com/elasticsearch/elasticsearch-rails/blob/templates/elasticsearch-model/README.md" data-name="templates" data-skip-pjax="true" rel="nofollow" class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target" title="templates">templates</a>
            </div> <!-- /.select-menu-item -->
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div> <!-- /.select-menu-list -->

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="https://github.com/elasticsearch/elasticsearch-rails/tree/v0.1.1/elasticsearch-model/README.md" data-name="v0.1.1" data-skip-pjax="true" rel="nofollow" class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target" title="v0.1.1">v0.1.1</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="https://github.com/elasticsearch/elasticsearch-rails/tree/v0.1.0.rc1/elasticsearch-model/README.md" data-name="v0.1.0.rc1" data-skip-pjax="true" rel="nofollow" class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target" title="v0.1.0.rc1">v0.1.0.rc1</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="https://github.com/elasticsearch/elasticsearch-rails/tree/v0.1.0/elasticsearch-model/README.md" data-name="v0.1.0" data-skip-pjax="true" rel="nofollow" class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target" title="v0.1.0">v0.1.0</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="https://github.com/elasticsearch/elasticsearch-rails/tree/nyt_articles.v1/elasticsearch-model/README.md" data-name="nyt_articles.v1" data-skip-pjax="true" rel="nofollow" class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target" title="nyt_articles.v1">nyt_articles.v1</a>
            </div> <!-- /.select-menu-item -->
        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div> <!-- /.select-menu-list -->

    </div> <!-- /.select-menu-modal -->
  </div> <!-- /.select-menu-modal-holder -->
</div> <!-- /.select-menu -->

  <div class="breadcrumb">
    <span class="repo-root js-repo-root"><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="https://github.com/elasticsearch/elasticsearch-rails" data-branch="master" data-direction="back" data-pjax="true" itemscope="url"><span itemprop="title">elasticsearch-rails</span></a></span></span><span class="separator"> / </span><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="https://github.com/elasticsearch/elasticsearch-rails/tree/master/elasticsearch-model" data-branch="master" data-direction="back" data-pjax="true" itemscope="url"><span itemprop="title">elasticsearch-model</span></a></span><span class="separator"> / </span><strong class="final-path">README.md</strong> <span aria-label="copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-clipboard-text="elasticsearch-model/README.md" data-copied-hint="copied!"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>


  <div class="commit file-history-tease">
    <img alt="Karel Minarik" class="main-avatar js-avatar" data-user="4790" height="24" src="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/4790" width="24">
    <span class="author"><a href="https://github.com/karmi" rel="author">karmi</a></span>
    <time class="js-relative-date" data-title-format="YYYY-MM-DD HH:mm:ss" datetime="2014-03-19T17:55:45+01:00" title="2014-03-19 22:25:45">a month ago</time>
    <div class="commit-title">
        <a href="https://github.com/elasticsearch/elasticsearch-rails/commit/619e5383cd3c707a31223aeebf13691ca995cb91" class="message" data-pjax="true" title="[MODEL] Small typo fix in the README

Thanks to @bobrenjc93 for the catch!

Closes #26">[MODEL] Small typo fix in the README</a>
    </div>

    <div class="participation">
      <p class="quickstat"><a href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#blob_contributors_box" rel="facebox"><strong>1</strong>  contributor</a></p>
      
    </div>
    <div id="blob_contributors_box" style="display:none">
      <h2 class="facebox-header">Users who have contributed to this file</h2>
      <ul class="facebox-user-list">
          <li class="facebox-user-list-item">
            <img alt="Karel Minarik" class=" js-avatar" data-user="4790" height="24" src="./elasticsearch-rails elasticsearch-model README.md at master · elasticsearch elasticsearch-rails_files/4790" width="24">
            <a href="https://github.com/karmi">karmi</a>
          </li>
      </ul>
    </div>
  </div>

<div class="file-box">
  <div class="file">
    <div class="meta clearfix">
      <div class="info file-name">
        <span class="icon"><b class="octicon octicon-file-text"></b></span>
        <span class="mode" title="File Mode">file</span>
        <span class="meta-divider"></span>
          <span>681 lines (494 sloc)</span>
          <span class="meta-divider"></span>
        <span>20.996 kb</span>
      </div>
      <div class="actions">
        <div class="button-group">
            <a class="minibutton tooltipped tooltipped-w js-conduit-openfile-check disabled" href="http://mac.github.com/" data-url="github-mac://openRepo/https://github.com/elasticsearch/elasticsearch-rails?branch=master&amp;filepath=elasticsearch-model%2FREADME.md" aria-label="Your version of GitHub for Mac is too old to open this file. Try checking for updates." data-failed-title="Your version of GitHub for Mac is too old to open this file. Try checking for updates.">
                <span class="octicon octicon-device-desktop"></span> Open
            </a>
                <a class="minibutton tooltipped tooltipped-n js-update-url-with-hash" aria-label="Clicking this button will automatically fork this project so you can edit the file" href="https://github.com/elasticsearch/elasticsearch-rails/edit/master/elasticsearch-model/README.md" data-method="post" rel="nofollow">Edit</a>
          <a href="https://github.com/elasticsearch/elasticsearch-rails/raw/master/elasticsearch-model/README.md" class="button minibutton " id="raw-url">Raw</a>
            <a href="https://github.com/elasticsearch/elasticsearch-rails/blame/master/elasticsearch-model/README.md" class="button minibutton js-update-url-with-hash">Blame</a>
          <a href="https://github.com/elasticsearch/elasticsearch-rails/commits/master/elasticsearch-model/README.md" class="button minibutton " rel="nofollow">History</a>
        </div><!-- /.button-group -->

            <a class="minibutton danger empty-icon tooltipped tooltipped-s" href="https://github.com/elasticsearch/elasticsearch-rails/delete/master/elasticsearch-model/README.md" aria-label="Fork this project and delete file" data-method="post" data-test-id="delete-blob-file" rel="nofollow">

          Delete
        </a>
      </div><!-- /.actions -->
    </div>
      
  <div id="readme" class="blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="elasticsearchmodel" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#elasticsearchmodel"><span class="octicon octicon-link"></span></a>Elasticsearch::Model</h1>

<p>The <code>elasticsearch-model</code> library builds on top of the
the <a href="https://github.com/elasticsearch/elasticsearch-ruby"><code>elasticsearch</code></a> library.</p>

<p>It aims to simplify integration of Ruby classes ("models"), commonly found
e.g. in <a href="http://rubyonrails.org/">Ruby on Rails</a> applications, with the
<a href="http://www.elasticsearch.org/">Elasticsearch</a> search and analytics engine.</p>

<p>The library is compatible with Ruby 1.9.3 and higher.</p>

<h2>
<a name="installation" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Install the package from <a href="https://rubygems.org/">Rubygems</a>:</p>

<pre><code>gem install elasticsearch-model
</code></pre>

<p>To use an unreleased version, either add it to your <code>Gemfile</code> for <a href="http://bundler.io/">Bundler</a>:</p>

<pre><code>gem 'elasticsearch-model', git: 'git://github.com/elasticsearch/elasticsearch-rails.git'
</code></pre>

<p>or install it from a source code checkout:</p>

<pre><code>git clone https://github.com/elasticsearch/elasticsearch-rails.git
cd elasticsearch-rails/elasticsearch-model
bundle install
rake install
</code></pre>

<h2>
<a name="usage" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>Let's suppose you have an <code>Article</code> model:</p>

<div class="highlight highlight-ruby"><pre><span class="nb">require</span> <span class="s1">'active_record'</span>
<span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span><span class="o">.</span><span class="n">establish_connection</span><span class="p">(</span> <span class="ss">adapter</span><span class="p">:</span> <span class="s1">'sqlite3'</span><span class="p">,</span> <span class="ss">database</span><span class="p">:</span> <span class="s2">":memory:"</span> <span class="p">)</span>
<span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Schema</span><span class="o">.</span><span class="n">define</span><span class="p">(</span><span class="ss">version</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span> <span class="n">create_table</span><span class="p">(</span><span class="ss">:articles</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span> <span class="n">t</span><span class="o">.</span><span class="n">string</span> <span class="ss">:title</span> <span class="p">}</span> <span class="p">}</span>

<span class="k">class</span> <span class="nc">Article</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span><span class="p">;</span> <span class="k">end</span>

<span class="no">Article</span><span class="o">.</span><span class="n">create</span> <span class="ss">title</span><span class="p">:</span> <span class="s1">'Quick brown fox'</span>
<span class="no">Article</span><span class="o">.</span><span class="n">create</span> <span class="ss">title</span><span class="p">:</span> <span class="s1">'Fast black dogs'</span>
<span class="no">Article</span><span class="o">.</span><span class="n">create</span> <span class="ss">title</span><span class="p">:</span> <span class="s1">'Swift green frogs'</span>
</pre></div>

<h3>
<a name="setup" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#setup"><span class="octicon octicon-link"></span></a>Setup</h3>

<p>To add the Elasticsearch integration for this model, require <code>elasticsearch/model</code>
and include the main module in your class:</p>

<div class="highlight highlight-ruby"><pre><span class="nb">require</span> <span class="s1">'elasticsearch/model'</span>

<span class="k">class</span> <span class="nc">Article</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="kp">include</span> <span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Model</span>
<span class="k">end</span>
</pre></div>

<p>This will extend the model with functionality related to Elasticsearch.</p>

<h4>
<a name="feature-extraction-pattern" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#feature-extraction-pattern"><span class="octicon octicon-link"></span></a>Feature Extraction Pattern</h4>

<p>Instead of including the <code>Elasticsearch::Model</code> module directly in your model,
you can include it in a "concern" or "trait" module, which is quite common pattern in Rails applications,
using e.g.  <code>ActiveSupport::Concern</code> as the instrumentation:</p>

<div class="highlight highlight-ruby"><pre><span class="c1"># In: app/models/concerns/searchable.rb</span>
<span class="c1">#</span>
<span class="k">module</span> <span class="nn">Searchable</span>
  <span class="kp">extend</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">Concern</span>

  <span class="n">included</span> <span class="k">do</span>
    <span class="kp">include</span> <span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Model</span>

    <span class="n">mapping</span> <span class="k">do</span>
      <span class="c1"># ...</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">search</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
      <span class="c1"># ...</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># In: app/models/article.rb</span>
<span class="c1">#</span>
<span class="k">class</span> <span class="nc">Article</span>
  <span class="kp">include</span> <span class="no">Searchable</span>
<span class="k">end</span>
</pre></div>

<h4>
<a name="the-__elasticsearch__-proxy" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#the-__elasticsearch__-proxy"><span class="octicon octicon-link"></span></a>The <code>__elasticsearch__</code> Proxy</h4>

<p>The <code>Elasticsearch::Model</code> module contains a big amount of class and instance methods to provide
all its functionality. To prevent polluting your model namespace, this functionality is primarily
available via the <code>__elasticsearch__</code> class and instance level proxy methods;
see the <code>Elasticsearch::Model::Proxy</code> class documentation for technical information.</p>

<p>The module will include important methods, such as <code>search</code>, into the class or module only
when they haven't been defined already. Following two calls are thus functionally equivalent:</p>

<div class="highlight highlight-ruby"><pre><span class="no">Article</span><span class="o">.</span><span class="n">__elasticsearch__</span><span class="o">.</span><span class="n">search</span> <span class="s1">'fox'</span>
<span class="no">Article</span><span class="o">.</span><span class="n">search</span> <span class="s1">'fox'</span>
</pre></div>

<p>See the <code>Elasticsearch::Model</code> module documentation for technical information.</p>

<h3>
<a name="the-elasticsearch-client" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#the-elasticsearch-client"><span class="octicon octicon-link"></span></a>The Elasticsearch client</h3>

<p>The module will set up a <a href="https://github.com/elasticsearch/elasticsearch-ruby/tree/master/elasticsearch">client</a>,
connected to <code>localhost:9200</code>, by default. You can access and use it as any other <code>Elasticsearch::Client</code>:</p>

<div class="highlight highlight-ruby"><pre><span class="no">Article</span><span class="o">.</span><span class="n">__elasticsearch__</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">health</span>
<span class="c1"># =&gt; { "cluster_name"=&gt;"elasticsearch", "status"=&gt;"yellow", ... }</span>
</pre></div>

<p>To use a client with different configuration, just set up a client for the model:</p>

<div class="highlight highlight-ruby"><pre><span class="no">Article</span><span class="o">.</span><span class="n">__elasticsearch__</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span> <span class="ss">host</span><span class="p">:</span> <span class="s1">'api.server.org'</span>
</pre></div>

<p>Or configure the client for all models:</p>

<div class="highlight highlight-ruby"><pre><span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Model</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span> <span class="ss">log</span><span class="p">:</span><span class="kp">true</span>
</pre></div>

<p>You might want to do this during you application bootstrap process, e.g. in a Rails initializer.</p>

<p>Please refer to the
<a href="https://github.com/elasticsearch/elasticsearch-ruby/tree/master/elasticsearch-transport"><code>elasticsearch-transport</code></a>
library documentation for all the configuration options, and to the
<a href="http://rubydoc.info/gems/elasticsearch-api"><code>elasticsearch-api</code></a> library documentation
for information about the Ruby client API.</p>

<h3>
<a name="importing-the-data" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#importing-the-data"><span class="octicon octicon-link"></span></a>Importing the data</h3>

<p>The first thing you'll want to do is importing your data into the index:</p>

<div class="highlight highlight-ruby"><pre><span class="no">Article</span><span class="o">.</span><span class="n">import</span>
<span class="c1"># =&gt; 0</span>
</pre></div>

<p>No errors were reported during importing, so... let's search the index!</p>

<h3>
<a name="searching" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#searching"><span class="octicon octicon-link"></span></a>Searching</h3>

<p>For starters, we can try the "simple" type of search:</p>

<div class="highlight highlight-ruby"><pre><span class="n">response</span> <span class="o">=</span> <span class="no">Article</span><span class="o">.</span><span class="n">search</span> <span class="s1">'fox dogs'</span>

<span class="n">response</span><span class="o">.</span><span class="n">took</span>
<span class="c1"># =&gt; 3</span>

<span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">total</span>
<span class="c1"># =&gt; 2</span>

<span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">_score</span>
<span class="c1"># =&gt; 0.02250402</span>

<span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">_source</span><span class="o">.</span><span class="n">title</span>
<span class="c1"># =&gt; "Quick brown fox"</span>
</pre></div>

<h4>
<a name="search-results" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#search-results"><span class="octicon octicon-link"></span></a>Search results</h4>

<p>The returned <code>response</code> object is a rich wrapper around the JSON returned from Elasticsearch,
providing access to response metadata and the actual results ("hits").</p>

<p>Each "hit" is wrapped in the <code>Result</code> class, and provides method access
to its properties via <a href="http://github.com/intridea/hashie"><code>Hashie::Mash</code></a>.</p>

<p>The <code>results</code> object supports the <code>Enumerable</code> interface:</p>

<div class="highlight highlight-ruby"><pre><span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">r</span><span class="o">|</span> <span class="n">r</span><span class="o">.</span><span class="n">_source</span><span class="o">.</span><span class="n">title</span> <span class="p">}</span>
<span class="c1"># =&gt; ["Quick brown fox", "Fast black dogs"]</span>

<span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">r</span><span class="o">|</span> <span class="n">r</span><span class="o">.</span><span class="n">title</span> <span class="o">=~</span> <span class="sr">/^Q/</span> <span class="p">}</span>
<span class="c1"># =&gt; [#&lt;Elasticsearch::Model::Response::Result:0x007 ... "_source"=&gt;{"title"=&gt;"Quick brown fox"}}&gt;]</span>
</pre></div>

<p>In fact, the <code>response</code> object will delegate <code>Enumerable</code> methods to <code>results</code>:</p>

<div class="highlight highlight-ruby"><pre><span class="n">response</span><span class="o">.</span><span class="n">any?</span> <span class="p">{</span> <span class="o">|</span><span class="n">r</span><span class="o">|</span> <span class="n">r</span><span class="o">.</span><span class="n">title</span> <span class="o">=~</span> <span class="sr">/fox|dog/</span> <span class="p">}</span>
<span class="c1"># =&gt; true</span>
</pre></div>

<h4>
<a name="search-results-as-database-records" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#search-results-as-database-records"><span class="octicon octicon-link"></span></a>Search results as database records</h4>

<p>Instead of returning documents from Elasticsearch, the <code>records</code> method will return a collection
of model instances, fetched from the primary database, ordered by score:</p>

<div class="highlight highlight-ruby"><pre><span class="n">response</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">to_a</span>
<span class="c1"># Article Load (0.3ms)  SELECT "articles".* FROM "articles" WHERE "articles"."id" IN (1, 2)</span>
<span class="c1"># =&gt; [#&lt;Article id: 1, title: "Quick brown fox"&gt;, #&lt;Article id: 2, title: "Fast black dogs"&gt;]</span>
</pre></div>

<p>The returned object is the genuine collection of model instances returned by your database,
i.e. <code>ActiveRecord::Relation</code> for ActiveRecord, or <code>Mongoid::Criteria</code> in case of MongoDB. This allows you to
chain other methods on top of search results, as you would normally do:</p>

<div class="highlight highlight-ruby"><pre><span class="n">response</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">title</span><span class="p">:</span> <span class="s1">'Quick brown fox'</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span>
<span class="c1"># Article Load (0.2ms)  SELECT "articles".* FROM "articles" WHERE "articles"."id" IN (1, 2) AND "articles"."title" = 'Quick brown fox'</span>
<span class="c1"># =&gt; [#&lt;Article id: 1, title: "Quick brown fox"&gt;]</span>

<span class="n">response</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">class</span>
<span class="c1"># =&gt; ActiveRecord::Relation::ActiveRecord_Relation_Article</span>
</pre></div>

<p>The ordering of the records by score will be preserved, unless you explicitely specify a different
order in your model query language:</p>

<div class="highlight highlight-ruby"><pre><span class="n">response</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="ss">:title</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span>
<span class="c1"># Article Load (0.2ms)  SELECT "articles".* FROM "articles" WHERE "articles"."id" IN (1, 2) ORDER BY "articles".title ASC</span>
<span class="c1"># =&gt; [#&lt;Article id: 2, title: "Fast black dogs"&gt;, #&lt;Article id: 1, title: "Quick brown fox"&gt;]</span>
</pre></div>

<p>The <code>records</code> method returns the real instances of your model, which is useful when you want to access your
model methods -- at the expense of slowing down your application, of course.
In most cases, working with <code>results</code> coming from Elasticsearch is sufficient, and much faster. See the
<a href="https://github.com/elasticsearch/elasticsearch-rails/tree/master/elasticsearch-rails"><code>elasticsearch-rails</code></a>
library for more information about compatibility with the Ruby on Rails framework.</p>

<p>When you want to access both the database <code>records</code> and search <code>results</code>, use the <code>each_with_hit</code>
(or <code>map_with_hit</code>) iterator:</p>

<div class="highlight highlight-ruby"><pre><span class="n">response</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">each_with_hit</span> <span class="p">{</span> <span class="o">|</span><span class="n">record</span><span class="p">,</span> <span class="n">hit</span><span class="o">|</span> <span class="nb">puts</span> <span class="s2">"* </span><span class="si">#{</span><span class="n">record</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">hit</span><span class="o">.</span><span class="n">_score</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
<span class="c1"># * Quick brown fox: 0.02250402</span>
<span class="c1"># * Fast black dogs: 0.02250402</span>
</pre></div>

<h4>
<a name="pagination" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#pagination"><span class="octicon octicon-link"></span></a>Pagination</h4>

<p>You can implement pagination with the <code>from</code> and <code>size</code> search parameters. However, search results
can be automatically paginated with the <a href="http://rubygems.org/gems/kaminari"><code>kaminari</code></a> gem.</p>

<p>If Kaminari is loaded, use the familiar paging methods:</p>

<div class="highlight highlight-ruby"><pre><span class="n">response</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">results</span>
<span class="n">response</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">records</span>
</pre></div>

<p>In a Rails controller, use the the <code>params[:page]</code> parameter to paginate through results:</p>

<div class="highlight highlight-ruby"><pre><span class="vi">@articles</span> <span class="o">=</span> <span class="no">Article</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:q</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">page</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:page</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">records</span>

<span class="vi">@articles</span><span class="o">.</span><span class="n">current_page</span>
<span class="c1"># =&gt; 2</span>
<span class="vi">@articles</span><span class="o">.</span><span class="n">next_page</span>
<span class="c1"># =&gt; 3</span>
</pre></div>

<p>To initialize and include the pagination support manually:</p>

<div class="highlight highlight-ruby"><pre><span class="no">Kaminari</span><span class="o">::</span><span class="no">Hooks</span><span class="o">.</span><span class="n">init</span>
<span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Response</span><span class="o">::</span><span class="no">Response</span><span class="o">.</span><span class="n">__send__</span> <span class="ss">:include</span><span class="p">,</span> <span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Response</span><span class="o">::</span><span class="no">Pagination</span><span class="o">::</span><span class="no">Kaminari</span>
</pre></div>

<h4>
<a name="the-elasticsearch-dsl" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#the-elasticsearch-dsl"><span class="octicon octicon-link"></span></a>The Elasticsearch DSL</h4>

<p>In most situation, you'll want to pass the search definition
in the Elasticsearch <a href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl.html">domain-specific language</a> to the client:</p>

<div class="highlight highlight-ruby"><pre><span class="n">response</span> <span class="o">=</span> <span class="no">Article</span><span class="o">.</span><span class="n">search</span> <span class="ss">query</span><span class="p">:</span>     <span class="p">{</span> <span class="ss">match</span><span class="p">:</span>  <span class="p">{</span> <span class="ss">title</span><span class="p">:</span> <span class="s2">"Fox Dogs"</span> <span class="p">}</span> <span class="p">},</span>
                          <span class="ss">highlight</span><span class="p">:</span> <span class="p">{</span> <span class="ss">fields</span><span class="p">:</span> <span class="p">{</span> <span class="ss">title</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}</span> <span class="p">}</span>

<span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">highlight</span><span class="o">.</span><span class="n">title</span>
<span class="c1"># ["Quick brown &lt;em&gt;fox&lt;/em&gt;"]</span>
</pre></div>

<p>You can pass any object which implements a <code>to_hash</code> method, or you can use your favourite JSON builder
to build the search definition as a JSON string:</p>

<div class="highlight highlight-ruby"><pre><span class="nb">require</span> <span class="s1">'jbuilder'</span>

<span class="n">query</span> <span class="o">=</span> <span class="no">Jbuilder</span><span class="o">.</span><span class="n">encode</span> <span class="k">do</span> <span class="o">|</span><span class="n">json</span><span class="o">|</span>
  <span class="n">json</span><span class="o">.</span><span class="n">query</span> <span class="k">do</span>
    <span class="n">json</span><span class="o">.</span><span class="n">match</span> <span class="k">do</span>
      <span class="n">json</span><span class="o">.</span><span class="n">title</span> <span class="k">do</span>
        <span class="n">json</span><span class="o">.</span><span class="n">query</span> <span class="s2">"fox dogs"</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">Article</span><span class="o">.</span><span class="n">search</span> <span class="n">query</span>
<span class="n">response</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">title</span>
<span class="c1"># =&gt; "Quick brown fox"</span>
</pre></div>

<h3>
<a name="index-configuration" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#index-configuration"><span class="octicon octicon-link"></span></a>Index Configuration</h3>

<p>For proper search engine function, it's often necessary to configure the index properly.
The <code>Elasticsearch::Model</code> integration provides class methods to set up index settings and mappings.</p>

<div class="highlight highlight-ruby"><pre><span class="k">class</span> <span class="nc">Article</span>
  <span class="n">settings</span> <span class="ss">index</span><span class="p">:</span> <span class="p">{</span> <span class="n">number_of_shards</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="k">do</span>
    <span class="n">mappings</span> <span class="ss">dynamic</span><span class="p">:</span> <span class="s1">'false'</span> <span class="k">do</span>
      <span class="n">indexes</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">analyzer</span><span class="p">:</span> <span class="s1">'english'</span><span class="p">,</span> <span class="n">index_options</span><span class="p">:</span> <span class="s1">'offsets'</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Article</span><span class="o">.</span><span class="n">mappings</span><span class="o">.</span><span class="n">to_hash</span>
<span class="c1"># =&gt; {</span>
<span class="c1">#      :article =&gt; {</span>
<span class="c1">#        :dynamic =&gt; "false",</span>
<span class="c1">#        :properties =&gt; {</span>
<span class="c1">#          :title =&gt; {</span>
<span class="c1">#            :type          =&gt; "string",</span>
<span class="c1">#            :analyzer      =&gt; "english",</span>
<span class="c1">#            :index_options =&gt; "offsets"</span>
<span class="c1">#          }</span>
<span class="c1">#        }</span>
<span class="c1">#      }</span>
<span class="c1">#    }</span>

<span class="no">Article</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">to_hash</span>
<span class="c1"># { :index =&gt; { :number_of_shards =&gt; 1 } }</span>
</pre></div>

<p>You can use the defined settings and mappings to create an index with desired configuration:</p>

<div class="highlight highlight-ruby"><pre><span class="no">Article</span><span class="o">.</span><span class="n">__elasticsearch__</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">indices</span><span class="o">.</span><span class="n">delete</span> <span class="ss">index</span><span class="p">:</span> <span class="no">Article</span><span class="o">.</span><span class="n">index_name</span> <span class="k">rescue</span> <span class="kp">nil</span>
<span class="no">Article</span><span class="o">.</span><span class="n">__elasticsearch__</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">indices</span><span class="o">.</span><span class="n">create</span> <span class="p">\</span>
  <span class="ss">index</span><span class="p">:</span> <span class="no">Article</span><span class="o">.</span><span class="n">index_name</span><span class="p">,</span>
  <span class="ss">body</span><span class="p">:</span> <span class="p">{</span> <span class="ss">settings</span><span class="p">:</span> <span class="no">Article</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">to_hash</span><span class="p">,</span> <span class="ss">mappings</span><span class="p">:</span> <span class="no">Article</span><span class="o">.</span><span class="n">mappings</span><span class="o">.</span><span class="n">to_hash</span> <span class="p">}</span>
</pre></div>

<p>There's a shortcut available for this common operation (convenient e.g. in tests):</p>

<div class="highlight highlight-ruby"><pre><span class="no">Article</span><span class="o">.</span><span class="n">__elasticsearch__</span><span class="o">.</span><span class="n">create_index!</span> <span class="ss">force</span><span class="p">:</span> <span class="kp">true</span>
<span class="no">Article</span><span class="o">.</span><span class="n">__elasticsearch__</span><span class="o">.</span><span class="n">refresh_index!</span>
</pre></div>

<p>By default, index name and document type will be inferred from your class name,
you can set it explicitely, however:</p>

<div class="highlight highlight-ruby"><pre><span class="k">class</span> <span class="nc">Article</span>
  <span class="n">index_name</span>    <span class="s2">"articles-</span><span class="si">#{</span><span class="no">Rails</span><span class="o">.</span><span class="n">env</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">document_type</span> <span class="s2">"post"</span>
<span class="k">end</span>
</pre></div>

<h3>
<a name="updating-the-documents-in-the-index" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#updating-the-documents-in-the-index"><span class="octicon octicon-link"></span></a>Updating the Documents in the Index</h3>

<p>Usually, we need to update the Elasticsearch index when records in the database are created, updated or deleted;
use the <code>index_document</code>, <code>update_document</code> and <code>delete_document</code> methods, respectively:</p>

<div class="highlight highlight-ruby"><pre><span class="no">Article</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">__elasticsearch__</span><span class="o">.</span><span class="n">index_document</span>
<span class="c1"># =&gt; {"ok"=&gt;true, ... "_version"=&gt;2}</span>
</pre></div>

<h4>
<a name="automatic-callbacks" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#automatic-callbacks"><span class="octicon octicon-link"></span></a>Automatic Callbacks</h4>

<p>You can automatically update the index whenever the record changes, by including
the <code>Elasticsearch::Model::Callbacks</code> module in your model:</p>

<div class="highlight highlight-ruby"><pre><span class="k">class</span> <span class="nc">Article</span>
  <span class="kp">include</span> <span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Model</span>
  <span class="kp">include</span> <span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Callbacks</span>
<span class="k">end</span>

<span class="no">Article</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">update_attribute</span> <span class="ss">:title</span><span class="p">,</span> <span class="s1">'Updated!'</span>

<span class="no">Article</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">'*'</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">r</span><span class="o">|</span> <span class="n">r</span><span class="o">.</span><span class="n">title</span> <span class="p">}</span>
<span class="c1"># =&gt; ["Updated!", "Lime green frogs", "Fast black dogs"]</span>
</pre></div>

<p>The automatic callback on record update keeps track of changes in your model
(via <a href="http://api.rubyonrails.org/classes/ActiveModel/Dirty.html"><code>ActiveModel::Dirty</code></a>-compliant implementation),
and performs a <em>partial update</em> when this support is available.</p>

<p>The automatic callbacks are implemented in database adapters coming with <code>Elasticsearch::Model</code>. You can easily
implement your own adapter: please see the relevant chapter below.</p>

<h4>
<a name="custom-callbacks" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#custom-callbacks"><span class="octicon octicon-link"></span></a>Custom Callbacks</h4>

<p>In case you would need more control of the indexing process, you can implement these callbacks yourself,
by hooking into <code>after_create</code>, <code>after_save</code>, <code>after_update</code> or <code>after_destroy</code> operations:</p>

<div class="highlight highlight-ruby"><pre><span class="k">class</span> <span class="nc">Article</span>
  <span class="kp">include</span> <span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Model</span>

  <span class="n">after_save</span>    <span class="p">{</span> <span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="o">[</span><span class="s2">"Updating document... "</span><span class="p">,</span> <span class="n">index_document</span> <span class="o">].</span><span class="n">join</span> <span class="p">}</span>
  <span class="n">after_destroy</span> <span class="p">{</span> <span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="o">[</span><span class="s2">"Deleting document... "</span><span class="p">,</span> <span class="n">delete_document</span><span class="o">].</span><span class="n">join</span> <span class="p">}</span>
<span class="k">end</span>
</pre></div>

<p>For ActiveRecord-based models, you need to hook into the <code>after_commit</code> callback, to protect
your data against inconsistencies caused by transaction rollbacks:</p>

<div class="highlight highlight-ruby"><pre><span class="k">class</span> <span class="nc">Article</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="kp">include</span> <span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Model</span>

  <span class="n">after_commit</span> <span class="ss">on</span><span class="p">:</span> <span class="o">[</span><span class="ss">:create</span><span class="o">]</span> <span class="k">do</span>
    <span class="n">index_document</span> <span class="k">if</span> <span class="nb">self</span><span class="o">.</span><span class="n">published?</span>
  <span class="k">end</span>

  <span class="n">after_commit</span> <span class="ss">on</span><span class="p">:</span> <span class="o">[</span><span class="ss">:update</span><span class="o">]</span> <span class="k">do</span>
    <span class="n">update_document</span> <span class="k">if</span> <span class="nb">self</span><span class="o">.</span><span class="n">published?</span>
  <span class="k">end</span>

  <span class="n">after_commit</span> <span class="ss">on</span><span class="p">:</span> <span class="o">[</span><span class="ss">:destroy</span><span class="o">]</span> <span class="k">do</span>
    <span class="n">delete_document</span> <span class="k">if</span> <span class="nb">self</span><span class="o">.</span><span class="n">published?</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>

<h4>
<a name="asynchronous-callbacks" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#asynchronous-callbacks"><span class="octicon octicon-link"></span></a>Asynchronous Callbacks</h4>

<p>Of course, you're still performing an HTTP request during your database transaction, which is not optimal
for large-scale applications. A better option would be to process the index operations in background,
with a tool like <a href="https://github.com/resque/resque"><em>Resque</em></a> or <a href="https://github.com/mperham/sidekiq"><em>Sidekiq</em></a>:</p>

<div class="highlight highlight-ruby"><pre><span class="k">class</span> <span class="nc">Article</span>
  <span class="kp">include</span> <span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Model</span>

  <span class="n">after_save</span>    <span class="p">{</span> <span class="no">Indexer</span><span class="o">.</span><span class="n">perform_async</span><span class="p">(</span><span class="ss">:index</span><span class="p">,</span>  <span class="nb">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">after_destroy</span> <span class="p">{</span> <span class="no">Indexer</span><span class="o">.</span><span class="n">perform_async</span><span class="p">(</span><span class="ss">:delete</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>
</pre></div>

<p>An example implementation of the <code>Indexer</code> worker class could look like this:</p>

<div class="highlight highlight-ruby"><pre><span class="k">class</span> <span class="nc">Indexer</span>
  <span class="kp">include</span> <span class="no">Sidekiq</span><span class="o">::</span><span class="no">Worker</span>
  <span class="n">sidekiq_options</span> <span class="ss">queue</span><span class="p">:</span> <span class="s1">'elasticsearch'</span><span class="p">,</span> <span class="k">retry</span><span class="p">:</span> <span class="kp">false</span>

  <span class="no">Logger</span> <span class="o">=</span> <span class="no">Sidekiq</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">level</span> <span class="o">==</span> <span class="no">Logger</span><span class="o">::</span><span class="no">DEBUG</span> <span class="p">?</span> <span class="no">Sidekiq</span><span class="o">.</span><span class="n">logger</span> <span class="p">:</span> <span class="kp">nil</span>
  <span class="no">Client</span> <span class="o">=</span> <span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span> <span class="ss">host</span><span class="p">:</span> <span class="s1">'localhost:9200'</span><span class="p">,</span> <span class="ss">logger</span><span class="p">:</span> <span class="no">Logger</span>

  <span class="k">def</span> <span class="nf">perform</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">record_id</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="o">[</span><span class="n">operation</span><span class="p">,</span> <span class="s2">"ID: </span><span class="si">#{</span><span class="n">record_id</span><span class="si">}</span><span class="s2">"</span><span class="o">]</span>

    <span class="k">case</span> <span class="n">operation</span><span class="o">.</span><span class="n">to_s</span>
      <span class="k">when</span> <span class="sr">/index/</span>
        <span class="n">record</span> <span class="o">=</span> <span class="no">Article</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">record_id</span><span class="p">)</span>
        <span class="no">Client</span><span class="o">.</span><span class="n">index</span>  <span class="ss">index</span><span class="p">:</span> <span class="s1">'articles'</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s1">'article'</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="n">record</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="ss">body</span><span class="p">:</span> <span class="n">record</span><span class="o">.</span><span class="n">as_indexed_json</span>
      <span class="k">when</span> <span class="sr">/delete/</span>
        <span class="no">Client</span><span class="o">.</span><span class="n">delete</span> <span class="ss">index</span><span class="p">:</span> <span class="s1">'articles'</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="s1">'article'</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="n">record_id</span>
      <span class="k">else</span> <span class="k">raise</span> <span class="no">ArgumentError</span><span class="p">,</span> <span class="s2">"Unknown operation '</span><span class="si">#{</span><span class="n">operation</span><span class="si">}</span><span class="s2">'"</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>

<p>Start the <em>Sidekiq</em> workers with <code>bundle exec sidekiq --queue elasticsearch --verbose</code> and
update a model:</p>

<div class="highlight highlight-ruby"><pre><span class="no">Article</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">update_attribute</span> <span class="ss">:title</span><span class="p">,</span> <span class="s1">'Updated'</span>
</pre></div>

<p>You'll see the job being processed in the console where you started the <em>Sidekiq</em> worker:</p>

<pre><code>Indexer JID-eb7e2daf389a1e5e83697128 DEBUG: ["index", "ID: 7"]
Indexer JID-eb7e2daf389a1e5e83697128 INFO: PUT http://localhost:9200/articles/article/1 [status:200, request:0.004s, query:n/a]
Indexer JID-eb7e2daf389a1e5e83697128 DEBUG: &gt; {"id":1,"title":"Updated", ...}
Indexer JID-eb7e2daf389a1e5e83697128 DEBUG: &lt; {"ok":true,"_index":"articles","_type":"article","_id":"1","_version":6}
Indexer JID-eb7e2daf389a1e5e83697128 INFO: done: 0.006 sec
</code></pre>

<h3>
<a name="model-serialization" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#model-serialization"><span class="octicon octicon-link"></span></a>Model Serialization</h3>

<p>By default, the model instance will be serialized to JSON using the <code>as_indexed_json</code> method,
which is defined automatically by the <code>Elasticsearch::Model::Serializing</code> module:</p>

<div class="highlight highlight-ruby"><pre><span class="no">Article</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">__elasticsearch__</span><span class="o">.</span><span class="n">as_indexed_json</span>
<span class="c1"># =&gt; {"id"=&gt;1, "title"=&gt;"Quick brown fox"}</span>
</pre></div>

<p>If you want to customize the serialization, just implement the <code>as_indexed_json</code> method yourself:</p>

<div class="highlight highlight-ruby"><pre><span class="k">class</span> <span class="nc">Article</span>
  <span class="kp">include</span> <span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Model</span>

  <span class="k">def</span> <span class="nf">as_indexed_json</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">{})</span>
    <span class="n">as_json</span><span class="p">(</span><span class="ss">only</span><span class="p">:</span> <span class="s1">'title'</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Article</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">as_indexed_json</span>
<span class="c1"># =&gt; {"title"=&gt;"Quick brown fox"}</span>
</pre></div>

<p>The re-defined method will be used in the indexing methods, such as <code>index_document</code>.</p>

<h4>
<a name="relationships-and-associations" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#relationships-and-associations"><span class="octicon octicon-link"></span></a>Relationships and Associations</h4>

<p>When you have a more complicated structure/schema, you need to customize the <code>as_indexed_json</code> method -
or perform the indexing separately, on your own.
For example, let's have an <code>Article</code> model, which <em>has_many</em> <code>Comment</code>s,
<code>Author</code>s and <code>Categories</code>. We might want to define the serialization like this:</p>

<div class="highlight highlight-ruby"><pre><span class="k">def</span> <span class="nf">as_indexed_json</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">{})</span>
  <span class="nb">self</span><span class="o">.</span><span class="n">as_json</span><span class="p">(</span>
    <span class="kp">include</span><span class="p">:</span> <span class="p">{</span> <span class="ss">categories</span><span class="p">:</span> <span class="p">{</span> <span class="ss">only</span><span class="p">:</span> <span class="ss">:title</span><span class="p">},</span>
               <span class="ss">authors</span><span class="p">:</span>    <span class="p">{</span> <span class="nb">methods</span><span class="p">:</span> <span class="o">[</span><span class="ss">:full_name</span><span class="o">]</span><span class="p">,</span> <span class="ss">only</span><span class="p">:</span> <span class="o">[</span><span class="ss">:full_name</span><span class="o">]</span> <span class="p">},</span>
               <span class="ss">comments</span><span class="p">:</span>   <span class="p">{</span> <span class="ss">only</span><span class="p">:</span> <span class="ss">:text</span> <span class="p">}</span>
             <span class="p">})</span>
<span class="k">end</span>

<span class="no">Article</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">as_indexed_json</span>
<span class="c1"># =&gt; { "id"         =&gt; 1,</span>
<span class="c1">#      "title"      =&gt; "First Article",</span>
<span class="c1">#      "created_at" =&gt; 2013-12-03 13:39:02 UTC,</span>
<span class="c1">#      "updated_at" =&gt; 2013-12-03 13:39:02 UTC,</span>
<span class="c1">#      "categories" =&gt; [ { "title" =&gt; "One" } ],</span>
<span class="c1">#      "authors"    =&gt; [ { "full_name" =&gt; "John Smith" } ],</span>
<span class="c1">#      "comments"   =&gt; [ { "text" =&gt; "First comment" } ] }</span>
</pre></div>

<p>Of course, when you want to use the automatic indexing callbacks, you need to hook into the appropriate
<em>ActiveRecord</em> callbacks -- please see the full example in <code>examples/activerecord_associations.rb</code>.</p>

<h3>
<a name="other-activemodel-frameworks" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#other-activemodel-frameworks"><span class="octicon octicon-link"></span></a>Other ActiveModel Frameworks</h3>

<p>The <code>Elasticsearch::Model</code> module is fully compatible with any ActiveModel-compatible model, such as <em>Mongoid</em>:</p>

<div class="highlight highlight-ruby"><pre><span class="nb">require</span> <span class="s1">'mongoid'</span>

<span class="no">Mongoid</span><span class="o">.</span><span class="n">connect_to</span> <span class="s1">'articles'</span>

<span class="k">class</span> <span class="nc">Article</span>
  <span class="kp">include</span> <span class="no">Mongoid</span><span class="o">::</span><span class="no">Document</span>

  <span class="n">field</span> <span class="ss">:id</span><span class="p">,</span>    <span class="ss">type</span><span class="p">:</span> <span class="nb">String</span>
  <span class="n">field</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">type</span><span class="p">:</span> <span class="nb">String</span>

  <span class="n">attr_accessible</span> <span class="ss">:id</span><span class="p">,</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">:published_at</span>

  <span class="kp">include</span> <span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Model</span>

  <span class="k">def</span> <span class="nf">as_indexed_json</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">{})</span>
    <span class="n">as_json</span><span class="p">(</span><span class="ss">except</span><span class="p">:</span> <span class="o">[</span><span class="ss">:id</span><span class="p">,</span> <span class="ss">:_id</span><span class="o">]</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Article</span><span class="o">.</span><span class="n">create</span> <span class="nb">id</span><span class="p">:</span> <span class="s1">'1'</span><span class="p">,</span> <span class="ss">title</span><span class="p">:</span> <span class="s1">'Quick brown fox'</span>
<span class="no">Article</span><span class="o">.</span><span class="n">import</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">Article</span><span class="o">.</span><span class="n">search</span> <span class="s1">'fox'</span><span class="p">;</span>
<span class="n">response</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">to_a</span>
<span class="c1">#  MOPED: 127.0.0.1:27017 QUERY        database=articles collection=articles selector={"_id"=&gt;{"$in"=&gt;["1"]}} ...</span>
<span class="c1"># =&gt; [#&lt;Article _id: 1, id: nil, title: "Quick brown fox", published_at: nil&gt;]</span>
</pre></div>

<p>Full examples for CouchBase, DataMapper, Mongoid, Ohm and Riak models can be found in the <code>examples</code> folder.</p>

<h3>
<a name="adapters" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#adapters"><span class="octicon octicon-link"></span></a>Adapters</h3>

<p>To support various "OxM" (object-relational- or object-document-mapper) implementations and frameworks,
the <code>Elasticsearch::Model</code> integration supports an "adapter" concept.</p>

<p>An adapter provides implementations for common behaviour, such as fetching records from the database,
hooking into model callbacks for automatic index updates, or efficient bulk loading from the database.
The integration comes with adapters for <em>ActiveRecord</em> and <em>Mongoid</em> out of the box.</p>

<p>Writing an adapter for your favourite framework is straightforward -- let's see
a simplified adapter for <a href="http://datamapper.org/"><em>DataMapper</em></a>:</p>

<div class="highlight highlight-ruby"><pre><span class="k">module</span> <span class="nn">DataMapperAdapter</span>

  <span class="c1"># Implement the interface for fetching records</span>
  <span class="c1">#</span>
  <span class="k">module</span> <span class="nn">Records</span>
    <span class="k">def</span> <span class="nf">records</span>
      <span class="n">klass</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="vi">@ids</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="c1"># ...</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># Register the adapter</span>
<span class="c1">#</span>
<span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Adapter</span><span class="o">.</span><span class="n">register</span><span class="p">(</span>
  <span class="no">DataMapperAdapter</span><span class="p">,</span>
  <span class="nb">lambda</span> <span class="p">{</span> <span class="o">|</span><span class="n">klass</span><span class="o">|</span> <span class="n">defined?</span><span class="p">(</span><span class="o">::</span><span class="no">DataMapper</span><span class="o">::</span><span class="no">Resource</span><span class="p">)</span> <span class="ow">and</span> <span class="n">klass</span><span class="o">.</span><span class="n">ancestors</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="o">::</span><span class="no">DataMapper</span><span class="o">::</span><span class="no">Resource</span><span class="p">)</span> <span class="p">}</span>
<span class="p">)</span>
</pre></div>

<p>Require the adapter and include <code>Elasticsearch::Model</code> in the class:</p>

<div class="highlight highlight-ruby"><pre><span class="nb">require</span> <span class="s1">'datamapper_adapter'</span>

<span class="k">class</span> <span class="nc">Article</span>
  <span class="kp">include</span> <span class="no">DataMapper</span><span class="o">::</span><span class="no">Resource</span>
  <span class="kp">include</span> <span class="no">Elasticsearch</span><span class="o">::</span><span class="no">Model</span>

  <span class="n">property</span> <span class="ss">:id</span><span class="p">,</span>    <span class="no">Serial</span>
  <span class="n">property</span> <span class="ss">:title</span><span class="p">,</span> <span class="nb">String</span>
<span class="k">end</span>
</pre></div>

<p>When accessing the <code>records</code> method of the response, for example,
the implementation from our adapter will be used now:</p>

<div class="highlight highlight-ruby"><pre><span class="n">response</span> <span class="o">=</span> <span class="no">Article</span><span class="o">.</span><span class="n">search</span> <span class="s1">'foo'</span>

<span class="n">response</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">to_a</span>
<span class="c1"># ~  (0.000057) SELECT "id", "title", "published_at" FROM "articles" WHERE "id" IN (3, 1) ORDER BY "id"</span>
<span class="c1"># =&gt; [#&lt;Article @id=1 @title="Foo" @published_at=nil&gt;, #&lt;Article @id=3 @title="Foo Foo" @published_at=nil&gt;]</span>

<span class="n">response</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">records</span><span class="o">.</span><span class="n">class</span>
<span class="c1"># =&gt; DataMapper::Collection</span>
</pre></div>

<p>More examples can be found in the <code>examples</code> folder. Please see the <code>Elasticsearch::Model::Adapter</code>
module and its submodules for technical information.</p>

<h2>
<a name="development-and-community" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#development-and-community"><span class="octicon octicon-link"></span></a>Development and Community</h2>

<p>For local development, clone the repository and run <code>bundle install</code>. See <code>rake -T</code> for a list of
available Rake tasks for running tests, generating documentation, starting a testing cluster, etc.</p>

<p>Bug fixes and features must be covered by unit tests.</p>

<p>Github's pull requests and issues are used to communicate, send bug reports and code contributions.</p>

<p>To run all tests against a test Elasticsearch cluster, use a command like this:</p>

<div class="highlight highlight-bash"><pre>curl -# https://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-1.0.0.RC1.tar.gz <span class="p">|</span> tar xz -C tmp/
<span class="nv">SERVER</span><span class="o">=</span>start <span class="nv">TEST_CLUSTER_COMMAND</span><span class="o">=</span><span class="nv">$PWD</span>/tmp/elasticsearch-1.0.0.RC1/bin/elasticsearch bundle <span class="nb">exec </span>rake <span class="nb">test</span>:all
</pre></div>

<h2>
<a name="license" class="anchor" href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>This software is licensed under the Apache 2 license, quoted below.</p>

<pre><code>Copyright (c) 2014 Elasticsearch &lt;http://www.elasticsearch.org&gt;

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre></article>
  </div>

  </div>
</div>

<a href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#jump-to-line" rel="facebox[.linejump]" data-hotkey="l" class="js-jump-to-line" style="display:none">Jump to Line</a>
<div id="jump-to-line" style="display:none">
  <form accept-charset="UTF-8" class="js-jump-to-line-form">
    <input class="linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line…" autofocus="">
    <button type="submit" class="button">Go</button>
  </form>
</div>

        </div>

      </div><!-- /.repo-container -->
      <div class="modal-backdrop"></div>
    </div><!-- /.container -->
  </div><!-- /.site -->


    </div><!-- /.wrapper -->

      <div class="container">
  <div class="site-footer">
    <ul class="site-footer-links right">
      <li><a href="https://status.github.com/">Status</a></li>
      <li><a href="http://developer.github.com/">API</a></li>
      <li><a href="http://training.github.com/">Training</a></li>
      <li><a href="http://shop.github.com/">Shop</a></li>
      <li><a href="https://github.com/blog">Blog</a></li>
      <li><a href="https://github.com/about">About</a></li>

    </ul>

    <a href="https://github.com/">
      <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
    </a>

    <ul class="site-footer-links">
      <li>© 2014 <span title="0.08605s from github-fe124-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="https://github.com/site/terms">Terms</a></li>
        <li><a href="https://github.com/site/privacy">Privacy</a></li>
        <li><a href="https://github.com/security">Security</a></li>
        <li><a href="https://github.com/contact">Contact</a></li>
    </ul>
  </div><!-- /.site-footer -->
</div><!-- /.container -->


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-fullscreen-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="fullscreen-contents js-fullscreen-contents" placeholder="" data-suggester="fullscreen_suggester"></textarea>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#" class="exit-fullscreen js-exit-fullscreen tooltipped tooltipped-w" aria-label="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#" class="theme-switcher js-theme-switcher tooltipped tooltipped-w" aria-label="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>



    <div id="ajax-error-message" class="flash flash-error">
      <span class="octicon octicon-alert"></span>
      <a href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#" class="octicon octicon-remove-close close js-ajax-error-dismiss"></a>
      Something went wrong with that request. Please try again.
    </div>

  


<div id="global-zeroclipboard-html-bridge" class="global-zeroclipboard-container" style="position: absolute; left: 0px; top: -9999px; width: 15px; height: 15px; z-index: 999999999;">      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="https://github.global.ssl.fastly.net/flash/ZeroClipboard.v1.3.2.swf">         <param name="allowScriptAccess" value="always">         <param name="scale" value="exactfit">         <param name="loop" value="false">         <param name="menu" value="false">         <param name="quality" value="best">         <param name="bgcolor" value="#ffffff">         <param name="wmode" value="transparent">         <param name="flashvars" value="trustedOrigins=github.com%2C%2F%2Fgithub.com%2Chttps%3A%2F%2Fgithub.com%2Cgithub.com%2C%2F%2Fgithub.com%2Chttps%3A%2F%2Fgithub.com">         <embed src="https://github.global.ssl.fastly.net/flash/ZeroClipboard.v1.3.2.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="100%" height="100%" name="global-zeroclipboard-flash-bridge" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" wmode="transparent" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="trustedOrigins=github.com%2C%2F%2Fgithub.com%2Chttps%3A%2F%2Fgithub.com%2Cgithub.com%2C%2F%2Fgithub.com%2Chttps%3A%2F%2Fgithub.com" scale="exactfit">                </object></div>    <div class="facebox" id="facebox" style="display:none;">       <div class="facebox-popup">         <div class="facebox-content">         </div>         <button type="button" class="facebox-close js-facebox-close">           <span class="octicon octicon-remove-close"></span>         </button>       </div>     </div><div id="window-resizer-tooltip" style="display: none;"><a href="https://github.com/elasticsearch/elasticsearch-rails/blob/master/elasticsearch-model/README.md#" title="Edit settings" style="background-image: url(chrome-extension://kkelicaakdanhinjdeammmilcgefonfh/images/icon_19.png);"></a><span class="tooltipTitle">Window size: </span><span class="tooltipWidth" id="winWidth">1017</span> x <span class="tooltipHeight" id="winHeight">730</span><br><span class="tooltipTitle">Viewport size: </span><span class="tooltipWidth" id="vpWidth">678</span> x <span class="tooltipHeight" id="vpHeight">410</span></div></body></html>