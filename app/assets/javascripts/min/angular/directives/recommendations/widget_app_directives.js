websiteApp.directive("category",function(){return{restrict:"E",scope:{widget:"@"},controller:["$scope",function(a){a.initVerticalText=function(){var b="book"==a.widget,c="reader"==a.widget,d="author"==a.widget;if(b)var e=a.$parent.book;else if(c)var e=a.$parent.reader;else if(d)var e=a.$parent.author;if(e){var f=e.category.name;f&&(a.nameArray=f.split("")),a.rating=e.rating}}}],templateUrl:"/assets/angular/widgets/base/widget/category.html"}}),websiteApp.directive("messageApp",["websiteService",function(){return{restrict:"E",controller:["$scope",function(a){a.send_message=function(){}}],templateUrl:"/assets/angular/widgets/base/widget/message_app.html"}}]),websiteApp.directive("follow",["$rootScope","$timeout","widgetService",function(a,b,c){return{restrict:"E",controller:["$scope",function(d){d.toggle_follow=function(){if(d.reader){var e=d.reader.name;if(d.reader.follow){d.reader.follow=!1,d.$emit("removeFromShelf","READER",d.reader);var f="SUCCESS-Reader "+e+" has been removed from your follow list."}else{d.reader.follow=!0,d.$emit("addToShelf","READER",d.reader);var f="SUCCESS-You are now following "+e+"."}var g=notify(a,f,b);c.follow(d.reader.id,"READER",d.reader.follow)}else if(d.author){var h=d.author.name;if(d.author.follow){d.author.follow=!1,d.$emit("removeFromShelf","AUTHOR",d.author),c.follow(d.author.id,"AUTHOR",d.author.follow);var f="SUCCESS-Author "+h+" has been removed from your follow list."}else{d.author.follow=!0,d.$emit("addToShelf","AUTHOR",d.author);var f="SUCCESS-You are now following Author "+h+"."}var g=notify(a,f,b);c.follow(d.author.id,"AUTHOR",d.author.follow)}g&&d.$on("destroy",function(){b.cancel(g)})}}],templateUrl:"/assets/angular/widgets/base/widget/follow.html"}}]),websiteApp.directive("widgetThumb",["$timeout","$rootScope",function(a){return{restrict:"E",controller:["$scope",function(b){b.show_images=function(){var c=500;2500==global_display_timer?global_display_timer=c:global_display_timer+=c;var d=a(function(){if(b.book)var a=b.book;else if(b.author)var a=b.author;else if(b.reader)var a=b.reader;a&&(b.thumb_style={background:"url('"+a.thumb.url+"')"})},global_display_timer);b.$on("destroy",function(){a.cancel(d)})},_get_obj=function(){if(b.book)var a=b.book;else if(b.author)var a=b.author;else if(b.reader)var a=b.reader;return a},(_init=function(){var a=_get_obj();a&&(b.thumb_style={"background-color":a.thumb.background_color}),b.show_images()})()}],templateUrl:"/assets/angular/widgets/base/widget/widget_thumb.html"}}]);