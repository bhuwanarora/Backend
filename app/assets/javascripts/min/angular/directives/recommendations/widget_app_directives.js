websiteApp.directive("category",function(){return{restrict:"E",scope:{widget:"@"},controller:["$scope",function(a){a.initVerticalText=function(){var b="book"==a.widget,c="reader"==a.widget,d="author"==a.widget;if(b)var e=a.$parent.book;else if(c)var e=a.$parent.reader;else if(d)var e=a.$parent.author;if(e){var f=e.category.name;f&&(a.nameArray=f.split("")),a.rating=e.rating}}}],templateUrl:"/assets/angular/widgets/base/widget/category.html"}}),websiteApp.directive("messageApp",["websiteService",function(){return{restrict:"E",controller:["$scope",function(a){a.send_message=function(){}}],templateUrl:"/assets/angular/widgets/base/widget/message_app.html"}}]),websiteApp.directive("follow",["$rootScope","$timeout","widgetService",function(a,b,c){return{restrict:"E",controller:["$scope",function(d){d.toggle_follow=function(){if(d.reader){var e=d.reader.name;if(d.reader.follow){d.reader.follow=!1;var f=a.user.readers.follow.indexOf(data);a.user.readers.follow.splice(f,1);var g="SUCCESS-Reader "+e+" has been removed from your follow list."}else{d.reader.follow=!0,a.user.readers.follow.push(d.reader);var g="SUCCESS-You are now following "+e+"."}var h=notify(a,g,b);c.follow(d.reader.id,"READER",d.reader.follow)}else if(d.author){var i=d.author.name;if(d.author.follow){d.author.follow=!1;var f=a.user.authors.follow.indexOf(data);a.user.authors.follow.splice(f,1),c.follow(d.author.id,"AUTHOR",d.author.follow);var g="SUCCESS-Author "+i+" has been removed from your follow list."}else{d.author.follow=!0,a.user.authors.follow.push(d.author);var g="SUCCESS-You are now following Author "+i+"."}var h=notify(a,g,b);c.follow(d.author.id,"AUTHOR",d.author.follow)}h&&d.$on("destroy",function(){b.cancel(h)})}}],templateUrl:"/assets/angular/widgets/base/widget/follow.html"}}]),websiteApp.directive("widgetThumb",["$timeout","$rootScope","$filter",function(a,b,c){return{restrict:"E",controller:["$scope",function(b){b.show_images=function(){if(angular.isDefined(b.book)){var c=b.book;angular.isDefined(c.isbn)&&(b.thumb_style={background:"url('"+_get_thumb(c)+"')"})}else if(angular.isDefined(b.author))var c=b.author;else if(angular.isDefined(b.reader))var c=b.reader;b.$on("destroy",function(){a.cancel(timeout_event)})},_get_obj=function(){if(b.book)var a=b.book;else if(b.author)var a=b.author;else if(b.reader)var a=b.reader;return a},_get_thumb=function(a){var b=c("thumb")(a.isbn);return b},(_init=function(){var a=_get_obj();a&&a.isbn&&(b.thumb_style={background:"url('"+_get_thumb(a)+"')"}),b.show_images()})()}],templateUrl:"/assets/angular/widgets/base/widget/widget_thumb.html"}}]);