websiteApp.directive("author",["$rootScope","widgetService",function(a){return{restrict:"E",scope:{author:"=data"},controller:["$scope",function(b){b.hover=function(){b.hovered=!0},b.mouseout=function(){b.hovered=!1},b.show_focused_tooltip=function(c){if(a.focused_author!=b.author){a.focused_author=b.author;var d=c.currentTarget.offsetParent.offsetParent.offsetLeft-c.pageX+c.clientX,e=screen.width-(d+c.currentTarget.offsetParent.scrollWidth),f=d;e>f?e>400?(d=d+c.currentTarget.offsetParent.scrollWidth-c.currentTarget.offsetLeft,a.focused_author.reposition_tooltip={left:d+"px",top:"60px"}):a.focused_author.reposition_tooltip={right:"0px",top:"60px"}:f>400?(d=screen.width-d,a.focused_author.reposition_tooltip={right:d+"px",top:"60px"}):a.focused_author.reposition_tooltip={left:"0px",top:"60px"}}else a.focused_author=null;c.stopPropagation()},(_init=function(){b.active_author_filter=!0})()}],templateUrl:"/assets/angular/widgets/base/author/author_widget.html"}}]),websiteApp.directive("focusedAuthor",["$rootScope","$timeout","widgetService",function(a){return{restrict:"E",controller:["$scope",function(b){b.stop_propagation=function(a){a.stopPropagation()},b.close_focused_tooltip=function(){a.focused_author=null},b.close_interaction_box=function(){b.focused_author.interact=!1,b.hash_tags=[]},b.stop_horizontal_scroll=function(a){a.stopPropagation()}}],templateUrl:"/assets/angular/widgets/base/author/focused_author.html"}}]),websiteApp.directive("authorBookmark",["$rootScope","$timeout","widgetService",function(a,b,c){return{restrict:"E",controller:["$scope",function(d){d.toggle_bookmarked=function(e){var f=d.author.bookmark_status,g=d.author.name;if(1==f){d.author.bookmark_status=0;var h="SUCCESS-Author "+g+" has been removed from your bookmark shelf."}else{d.author.bookmark_status=1;var h="SUCCESS-AUTHOR "+g+" has been added to your bookmark shelf.";a.$broadcast("glowBookmark")}var i=notify(a,h,b);d.$on("destroy",function(){b.cancel(i)}),c.bookmark("AUTHOR",d.author.id,d.author.bookmark_status),e.stopPropagation()}}],templateUrl:"/assets/angular/widgets/base/author/bookmark.html"}}]),websiteApp.directive("authorInteract",["websiteService",function(a){return{restrict:"E",controller:["$scope",function(b){_init=function(){b.setStatus()},b.setStatus=function(a){b.read=1==a?!0:!1},b.handle_selection=function(){},b.set_current=function(){},b.handle_backspace=function(a){var c=$(a.currentTarget).val().split(" "),d=$(a.currentTarget).siblings().html().split(" "),e=(String.fromCharCode(a.keyCode),c.length);if(1==e)var f=c.slice(0,e-1).join(" "),g=d.slice(0,e-1).join(" ");else var f=c.slice(0,e-1).join(" ")+" ",g=d.slice(0,e-1).join(" ")+" ";var h=c.pop(),i=d.pop(),j=8==a.keyCode,k=b.hash_tagging;if(j){if("#"==h)b.hash_tagging=!1,b.hash_tags=[],$(a.currentTarget).siblings().html(g);else if(k)$(a.currentTarget).siblings().html(g),$(a.currentTarget).val(f),b.hash_tagging=!1,b.hash_tags=[],a.preventDefault();else{var l=">"==i[i.length-1];if(l)$(a.currentTarget).siblings().html(g),$(a.currentTarget).val(f),b.hash_tags=[],a.preventDefault();else{var m=$(a.currentTarget).siblings().html();$(a.currentTarget).siblings().html(m.substring(0,m.length-1))}}$(a.currentTarget).val()&&""!=$(a.currentTarget).val()||$(a.currentTarget).siblings().html("")}a.stopPropagation()},b.handle_hash_tags=function(c){{var d=$(c.currentTarget).val().split(" "),e=String.fromCharCode(c.keyCode),f=d.length,g=(d.slice(0,f-1).join(" "),d.pop()),h=""==g;b.hash_tagging}if(h&&"#"==e){var i="<b>"+e+"</b>";b.hash_tagging=!0,$(c.currentTarget).siblings().append(i)}else if(h&&"+"==e){var i="<b>"+e+"</b>";b.hash_tagging=!0,$(c.currentTarget).siblings().append(i),b.search_for="TAGS"}else if(h&&"@"==e){var i="<b>"+e+"</b>";b.hash_tagging=!0,$(c.currentTarget).siblings().append(i),b.search_for="[AUTHORS, authorS]"}else" "==e?(b.hash_tagging=!1,$(c.currentTarget).siblings().append(e),b.search_for=null):b.hash_tagging?$(c.currentTarget).siblings().find("b:last").append(e):$(c.currentTarget).siblings().append(e);b.search_for&&(string_to_be_searched=g.slice(1,g.length)+""+e,a.search(string_to_be_searched.trim(),b.search_for,3).then(function(a){b.hash_tags=a.results})),c.stopPropagation()}}],templateUrl:"/assets/angular/widgets/base/author/author_interact.html"}}]);