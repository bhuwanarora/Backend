websiteApp.directive("author",["$rootScope","widgetService",function(a){return{restrict:"E",scope:{author:"=data"},controller:["$scope",function(b){b.hover=function(){b.hovered=!0},b.mouseout=function(){b.hovered=!1},b.show_focused_tooltip=function(c){if(a.focused_author!=b.author){a.focused_author=b.author;var d=c.currentTarget.offsetParent.offsetParent.offsetLeft-c.pageX+c.clientX,e=window_width-(d+c.currentTarget.offsetParent.scrollWidth),f=d;e>f?e>400?(d=d+c.currentTarget.offsetParent.scrollWidth-c.currentTarget.offsetLeft,a.focused_author.reposition_tooltip={left:d+"px",top:"60px"}):a.focused_author.reposition_tooltip={right:"0px",top:"60px"}:f>400?(d=window_width-d,a.focused_author.reposition_tooltip={right:d+"px",top:"60px"}):a.focused_author.reposition_tooltip={left:"0px",top:"60px"}}else delete a.focused_author;c.stopPropagation()},(_init=function(){b.active_author_filter=!0})()}],templateUrl:"/assets/angular/widgets/base/author/author_widget.html"}}]),websiteApp.directive("focusedAuthor",["$rootScope","$timeout","widgetService",function(a){return{restrict:"E",controller:["$scope",function(b){b.stop_propagation=function(a){a.stopPropagation()},b.close_focused_tooltip=function(){delete a.focused_author},b.close_interaction_box=function(){b.focused_author.interact=!1,b.hash_tags=[]},b.stop_horizontal_scroll=function(a){a.stopPropagation()}}],templateUrl:"/assets/angular/widgets/base/author/focused_author.html"}}]),websiteApp.directive("authorBookmark",["$rootScope","$timeout","widgetService",function(a,b,c){return{restrict:"E",controller:["$scope",function(d){d.toggle_bookmarked=function(e){var f=d.author.bookmark_status,g=d.author.name;if(1==f){d.author.bookmark_status=0;var h="SUCCESS-Author "+g+" has been removed from your bookmark shelf."}else{d.author.bookmark_status=1;var h="SUCCESS-AUTHOR "+g+" has been added to your bookmark shelf.";a.$broadcast("glowBookmark")}var i=notify(a,h,b);d.$on("destroy",function(){b.cancel(i)}),c.bookmark("AUTHOR",d.author.id,d.author.bookmark_status),e.stopPropagation()}}],templateUrl:"/assets/angular/widgets/base/author/bookmark.html"}}]),websiteApp.directive("authorInteract",["websiteService","WebsiteUIConstants",function(a,b){return{restrict:"E",controller:["$scope",function(c){_init=function(){c.setStatus()},c.setStatus=function(a){c.read=1==a?!0:!1},c.handle_selection=function(){},c.set_current=function(){},c.handle_backspace=function(a){var d=$(a.currentTarget).val().split(" "),e=$(a.currentTarget).siblings().html().split(" "),f=(String.fromCharCode(a.keyCode),d.length);if(1==f)var g=d.slice(0,f-1).join(" "),h=e.slice(0,f-1).join(" ");else var g=d.slice(0,f-1).join(" ")+" ",h=e.slice(0,f-1).join(" ")+" ";var i=d.pop(),j=e.pop(),k=a.keyCode==b.Backspace,l=c.hash_tagging;if(k){if("#"==i)c.hash_tagging=!1,c.hash_tags=[],$(a.currentTarget).siblings().html(h);else if(l)$(a.currentTarget).siblings().html(h),$(a.currentTarget).val(g),c.hash_tagging=!1,c.hash_tags=[],a.preventDefault();else{var m=">"==j[j.length-1];if(m)$(a.currentTarget).siblings().html(h),$(a.currentTarget).val(g),c.hash_tags=[],a.preventDefault();else{var n=$(a.currentTarget).siblings().html();$(a.currentTarget).siblings().html(n.substring(0,n.length-1))}}$(a.currentTarget).val()&&""!=$(a.currentTarget).val()||$(a.currentTarget).siblings().html("")}a.stopPropagation()},c.handle_hash_tags=function(b){{var d=$(b.currentTarget).val().split(" "),e=String.fromCharCode(b.keyCode),f=d.length,g=(d.slice(0,f-1).join(" "),d.pop()),h=""==g;c.hash_tagging}if(h&&"#"==e){var i="<b>"+e+"</b>";c.hash_tagging=!0,$(b.currentTarget).siblings().append(i)}else if(h&&"+"==e){var i="<b>"+e+"</b>";c.hash_tagging=!0,$(b.currentTarget).siblings().append(i),c.search_for="TAGS"}else if(h&&"@"==e){var i="<b>"+e+"</b>";c.hash_tagging=!0,$(b.currentTarget).siblings().append(i),c.search_for="[AUTHORS, authorS]"}else" "==e?(c.hash_tagging=!1,$(b.currentTarget).siblings().append(e),delete c.search_for):c.hash_tagging?$(b.currentTarget).siblings().find("b:last").append(e):$(b.currentTarget).siblings().append(e);c.search_for&&(string_to_be_searched=g.slice(1,g.length)+""+e,a.search(string_to_be_searched.trim(),c.search_for,3).then(function(a){c.hash_tags=a.results})),b.stopPropagation()}}],templateUrl:"/assets/angular/widgets/base/author/author_interact.html"}}]);