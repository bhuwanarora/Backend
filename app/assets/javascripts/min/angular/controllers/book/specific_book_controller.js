homeApp.controller("specificBookController",["$scope","$rootScope","$timeout","bookService","$mdToast","$location","$mdSidenav","ColorConstants","scroller",function(a,b,c,d,e,f,g,h,i){a.toggle_endorse=function(){j()?g("signup").toggle():(a.book.endorse_status?a.book.endorse_status=!1:a.book.endorse_status=!0,d.endorse_book(b.active_book.book_id,a.book.endorse_status),e.show({controller:"toastController",templateUrl:"assets/angular/html/shared/toast/endorse_action.html",hideDelay:6e3,position:a.getToastPosition()}))},a.scroll_to=function(a){var b=0,c=2e3;a+="-content";var d=angular.element(document.getElementById(a));i.scrollToElement(d,b,c)};var j=function(){return""==getCookie("logged")||null==getCookie("logged")};a.show_share_bottom_sheet=function(a){g("right_share").toggle()},a.getToastPosition=function(){return Object.keys(a.toast_position).filter(function(b){return a.toast_position[b]}).join(" ")},a.rate_book=function(a){j()?g("signup").toggle():d.rate_book(a.book_id,a.user_rating)},a.load_sample_read=function(){},a.get_active_class=function(a){var b=""==f.path().substr(1,a.length+1)&&"book/timeline"==a;return f.path().substr(1,a.length+1)==a||b?"bold red_color":"grey_color"};var k=function(){var e=/[?&]([^=#]+)=([^&#]*)/g,g=e.exec(f.absUrl());if(angular.isUndefined&&(a.data={}),a.data.selectedIndex=0,null!=g)var i=g[2];if(angular.isDefined(b.active_book))if(angular.isDefined(b.active_book.id))var j=b.active_book.id;else var j=b.active_book.book_id;else var j=i;var k="id="+j;a.book_loading=!0;var l=c(function(){a.info.loading=!0,d.get_book_details(k).then(function(c){if(angular.isDefined(c)&&null!=c){var d=null!=c.endorse_status,e=null!=c.status,f=Math.floor(Math.random()*h.value.length),g={endorse_status:d,status:e,color:h.value[f]};angular.isDefined(b.active_book)?a.book=angular.extend(b.active_book,c):a.book=c,a.book=angular.extend(a.book,g),b.active_book=a.book,a.info.book=a.book}a.book_loading=!1,a.info.loading=!1}),d.update_visited(j)},100);a.$on("destroy",function(){c.cancel(l)}),a.toast_position={bottom:!1,top:!0,left:!1,right:!0},a.is_book=!0,a.constant={show_book:!0}};k()}]);