homeApp.directive("bookStach",["$rootScope","roomService","ColorConstants",function(a,b,c){return{restrict:"E",controller:["$scope",function(a){var d=function(){b.get_visited_books().then(function(b){angular.isUndefined(a.visited_books)&&(a.visited_books=[]),e(b,a.visited_books)})},e=function(a,b){return angular.forEach(a,function(a){var b=Math.floor(Math.random()*c.value.length),d=f(70,100),e=f(40,60),g=f(1,10),h={width:d+"%",height:e+"px","background-color":c.value[b],"margin-left":g+"px"},i=angular.extend(a,{random_style:h,color:c.value[b]});this.push(i)},b),b},f=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},g=function(){a.shelf_loading=!0,d()};g()}],templateUrl:"/assets/angular/html/room/book_stack.html"}}]),homeApp.directive("articles",["$rootScope","roomService","ColorConstants",function(a,b,c){return{restrict:"E",controller:["$scope",function(a){var d=function(){b.get_visited_articles().then(function(b){angular.isUndefined(a.visited_articles)&&(a.visited_articles=[]),e(b,a.visited_articles),a.shelf_loading=!1})},e=function(a,b){return angular.forEach(a,function(a){var b=Math.floor(Math.random()*c.value.length),d=f(70,100),e=f(40,60),g=f(1,10),h={width:d+"%",height:e+"px","background-color":c.value[b],"margin-left":g+"px"},i=angular.extend(a,{random_style:h,color:c.value[b]});this.push(i)},b),b},f=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},g=function(){a.shelf_loading=!0,d()};g()}],templateUrl:"/assets/angular/html/room/show.html"}}]),homeApp.directive("articleShelves",["$rootScope","roomService","ColorConstants",function(a,b,c){return{restrict:"E",controller:["$scope",function(a){var c=function(){b.get_articles_grouped_by_shelves().then(function(b){a.articles_grouped_by_shelves=b,a.shelf_loading=!1})},d=function(){a.shelf_loading=!0,c()};d()}],templateUrl:"/assets/angular/html/room/_right_panel.html"}}]),homeApp.directive("bookShelves",["$rootScope","roomService","ColorConstants",function(a,b,c){return{restrict:"E",controller:["$scope",function(a){var d=function(){b.get_books_grouped_by_shelves().then(function(b){angular.isUndefined(a.book_shelves)&&(a.book_shelves=[]),a.book_shelves=[],angular.forEach(b,function(a){var b=[];a.books=f(a.books,b),this.push(a)},a.book_shelves),g(),a.shelf_loading=!1})},e=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},f=function(a,b){return angular.forEach(a,function(a){var b=Math.floor(Math.random()*c.value.length),d=e(70,100),f=e(40,60),g=e(1,10),h={width:d+"%",height:f+"px","background-color":c.value[b],"margin-left":g+"px"},i=angular.extend(a,{random_style:h,color:c.value[b]});this.push(i)},b),b},g=function(){var b=function(a,b){var c=!1,d=0;return angular.forEach(b,function(b,e){a==b.shelf&&(c=!0,d=e)}),{status:c,index:d}},c=[];angular.forEach(a.book_shelves,function(a){var d=b(a.shelf,c);d.status?c[d.index].books.push(a.books[0]):c.push(a)}),a.book_shelves=c},h=function(){a.shelf_loading=!0,d()};h()}],templateUrl:"/assets/angular/html/room/_left_panel.html"}}]);;homeApp.service("roomService",["$http","$q","$rootScope","WebsiteUIConstants",function(a,b,c,d){this.get_books_grouped_by_shelves=function(){return _deferred_request("/api/v0/book_shelves",b,a)},this.get_articles_grouped_by_shelves=function(){return _deferred_request("/api/v0/article_shelves",b,a)},this.get_visited_articles=function(){return _deferred_request("/api/v0/visited_articles",b,a)},this.get_visited_books=function(){return _deferred_request("/api/v0/visited_books",b,a)}}]);;homeApp.controller("roomController",["$scope","$rootScope","$timeout","roomService","ColorConstants",function(a,b,c,d,e){a.add_books_to_shelf=function(c,d){b.active_shelf=c,a.info.show_book_share=!0}}]);