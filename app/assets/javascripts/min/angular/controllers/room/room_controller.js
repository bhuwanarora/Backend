homeApp.controller("roomController",["$scope","$rootScope","$timeout","roomService","ColorConstants",function(a,b,c,d,e){a.add_books_to_shelf=function(c){b.active_shelf=c,a.info.show_book_share=!0};{var f=function(){d.get_books_grouped_by_shelves().then(function(b){angular.isUndefined(a.book_shelves)&&(a.book_shelves=[]),a.book_shelves=[],angular.forEach(b,function(a){var b=[];a.books=k(a.books,b),this.push(a)},a.book_shelves),l()})},g=function(){d.get_articles_grouped_by_shelves().then(function(b){a.articles_grouped_by_shelves=b})},h=function(){d.get_visited_articles().then(function(b){angular.isUndefined(a.visited_articles)&&(a.visited_articles=[]),k(b,a.visited_articles)})},i=function(){d.get_visited_books().then(function(b){angular.isUndefined(a.visited_books)&&(a.visited_books=[]),k(b,a.visited_books),a.info.loading=!1})},j=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},k=function(a,b){return angular.forEach(a,function(a){var b=Math.floor(Math.random()*e.value.length),c=j(70,100),d=j(40,60),f=j(1,10),g={width:c+"%",height:d+"px","background-color":e.value[b],"margin-left":f+"px"},h=angular.extend(a,{random_style:g,color:e.value[b]});this.push(h)},b),b},l=function(){var b=function(a,b){var c=!1,d=0;return angular.forEach(b,function(b,e){a==b.shelf&&(c=!0,d=e)}),{status:c,index:d}},c=[];angular.forEach(a.book_shelves,function(a){var d=b(a.shelf,c);d.status?c[d.index].books.push(a.books[0]):c.push(a)}),a.book_shelves=c};!function(){a.info.loading=!0,f(),g(),h(),i()}()}}]);