websiteApp.controller("loginController",["$scope","$rootScope","websiteService","Facebook",function(a,b,c,d){a.authenticate=function(d){var e=b.user.email,f=b.user.password,g={email:e,password:f,old_user:d};a.loading_icon=!0;var h=function(c){a.error_message=c.message,b.user.profile_status=c.profile_status,b.user.logged=!0,b.user.id=c.user_id,a.loading_icon=!1,a.$emit("getNotifications")},i=function(c){a.loading_icon=!1,a.error_message=c.data.message,b.user.password=null};c.authenticate(g).then(h,i)},_bind_auth_listeners=function(){a.$on("event:google-plus-signin-success",function(){}),a.$on("event:google-plus-signin-failure",function(){}),a.$on("Facebook:statusChange",function(b,c){"connected"==c.status&&a.$apply(function(){})}),a.$watch(function(){return d.isReady()},function(b){b&&(a.facebookReady=!0)})},a.intent_login=function(){d.getLoginStatus(function(c){"connected"==c.status?(b.logged=!0,a.me()):a.login()})},a.login=function(){d.login(function(c){"connected"==c.status&&(b.logged=!0,a.me())})},a.me=function(){d.api("/me",function(c){a.$apply(function(){b.user=c,b.user.profile_status=0,b.user.thumb="https://scontent-b-kul.xx.fbcdn.net/hphotos-ash3/t1.0-9/66784_415130785223231_1615890777_n.jpg",b.user.logged=!0})})},a.logout=function(){d.logout(function(){a.$apply(function(){b.user={},b.logged=!1})})},(_init=function(){_bind_auth_listeners()})()}]);