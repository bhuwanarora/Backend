homeApp.controller("searchController",["$scope","searchService","$location",function(a,b,c){a.query_search=function(c){c.length>2?(a.info.loading=!0,b.raw(c).then(function(b){if(delete a.search_results,a.info.loading=!1,a.did_you_mean=!1,angular.forEach(b,function(b){b.fuzzy&&(a.did_you_mean=!0)}),a.search_results=b,a.did_you_mean){var d={name:"Did you mean",labels:[]};a.search_results.splice(0,0,d)}if(b.length>0){var d={name:"Show all results",show_all:!0,labels:[],search_text:c};a.search_results.push(d)}})):a.search_results=[]},a.show_all_results=function(c,d){b.raw(c,d).then(function(b){a.all_results=b})},a.on_select=function(b){if(delete a.search_results,angular.isDefined(b)){var c=b.labels.indexOf("Book")>=0,d=b.labels.indexOf("Author")>=0,e="";c?e="/book?q="+b.id:d?e="/author?q="+b.id:b.show_all&&(e="/search?q="+b.search_text),""!=e&&(window.location.href=e)}},a.reload_results=function(a){switch(a){case"Book":break;case"Author":break;case"Community":break;case"Blog":break;case"Person":break;case"News":}};!function(){var b=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))};a.info.mobile_search=!0,a.search_results=[];var d=/[?&]([^=#]+)=([^&#]*)/g,e=d.exec(c.absUrl()),f=c.$$absUrl.indexOf("search")>=0;if(angular.isDefined(e)&&null!=e&&f){var g=b("q"),h=b("type");a.show_all_results(g,h),a.display_results_for=g}}()}]);