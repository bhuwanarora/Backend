homeApp.controller("searchController",["$scope","searchService","$location",function(a,b,c){a.query_search=function(c){c.length>2?(a.info.loading=!0,params={q:c,count:4},b.raw(params).then(function(b){if(delete a.search_results,a.info.loading=!1,a.did_you_mean=!1,angular.forEach(b,function(b){b.fuzzy&&(a.did_you_mean=!0)}),a.search_results=b,a.did_you_mean){var d={name:"Did you mean",labels:[]};a.search_results.splice(0,0,d)}if(b.length>0){var d={name:"Show all results",show_all:!0,labels:[],search_text:c};a.search_results.push(d)}})):a.search_results=[]},a.on_select=function(b){if(delete a.search_results,angular.isDefined(b)){var c=b.labels.indexOf("Book")>=0,d=b.labels.indexOf("Author")>=0,e="";c?e="/book?q="+b.id:d?e="/author?q="+b.id:b.show_all&&(e="/search?q="+b.search_text),""!=e&&(window.location.href=e)}};(function(){a.info.mobile_search=!0,a.search_results=[]})()}]);