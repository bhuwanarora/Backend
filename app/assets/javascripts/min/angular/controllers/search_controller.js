homeApp.controller("searchController",["$scope","searchService","$location",function(a,b,c){a.show_search_bar=function(){a.visible_search_bar=!a.visible_search_bar},a.query_search=function(c){b.raw(c).then(function(b){if(a.search_results=b,a.did_you_mean=!1,angular.forEach(b,function(b){b.fuzzy&&(a.did_you_mean=!0)}),a.did_you_mean){var d={name:"Did you mean",labels:[]};a.search_results.splice(0,0,d)}var d={name:"Show all results",show_all:!0,labels:[],search_text:c};a.search_results.push(d)})},a.show_all_results=function(c){b.raw(c,30).then(function(b){a.all_results=b})},a.on_select=function(a){if(angular.isDefined(a)){var b=a.labels.indexOf("Book")>=0,c=a.labels.indexOf("Author")>=0,d="";b?d="/book?q="+a.id:c?d="/author?q="+a.id:a.show_all&&(d="/search?q="+a.search_text),""!=d&&(window.location.href=d)}},a.reload_results=function(a){switch(a){case"Book":break;case"Author":break;case"Community":break;case"Blog":break;case"Person":break;case"News":}};!function(){a.search_results=[];var b=/[?&]([^=#]+)=([^&#]*)/g,d=b.exec(c.absUrl());if(angular.isDefined(d)&&null!=d){var e=d[2];a.show_all_results(e),a.display_results_for=e}}()}]);