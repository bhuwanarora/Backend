<!-- <div class="go_left" ng-click="move_left()"></div>
<div class="go_right" ng-click="move_right()"></div> -->
<!-- <horizontal-scroller></horizontal-scroller> -->
<!-- <div feedback-popup></div> -->
<div msd-wheel="bindHorizontalScroll($event, $delta, $deltaX, $deltaY)" 
   ng-animate="msd-wheel"
   class="recommendations"
   style="height:100%; white-space:nowrap;"
   ng-controller="recommendationsController"
   ng-click="hide_popups()">
		<main-header></main-header>
		<recommendation-footer></recommendation-footer>
		<!-- <div class="status animate-fast" ng-click="show_interaction_box()">
			<span><input disabled placeholder="Share something..." /></span>
		</div> -->

		<div class="vertical_padder_active"></div>

		<!-- <div class="recommendations_page"><search-bar></search-bar></div> -->
		
		
		<div ng-class="{'horizontal_padder_active': !user.collapsed_column, 'horizontal_padder_inactive': user.collapsed_column}" 
			 class="info_card_placeholder animate-fast"></div>
		<div ng-switch on="panel_selected" class="full_height">
			<div ng-switch-when="BOOKMARK" class="full_height">
				<div ng-if="$routeParams.type == 'books'" ng-model="user.books.bookmarked">
					<div ng-switch on="user.books.bookmarked.length">
						<div ng-switch-when="0">
							<div class="recommendation_block">
								<div class="widget bookmark_instruct">
									
								</div>
							</div>
						</div>
						<div ng-switch-default>
							<div ng-repeat="user_book in user.books.bookmarked" class="recommendation_block">
								<book track id="{{user_book.category.name | lowercase}}-{{user_book.id}}" data="user_book"></book>
							</div>
						</div>
					</div>
				</div>
				<div ng-if="$routeParams.type == 'authors'" ng-model="user.authors.bookmarked">
					<div ng-switch on="user.authors.bookmarked.length">
						<div ng-switch-when="0">
							Bookmark authors
						</div>
						<div ng-switch-default>
							<div ng-repeat="author in user.authors.bookmarked" class="recommendation_block">
								<author track id="{{author.category.name | lowercase}}-{{author.id}}" data="author"></author>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div ng-switch-when="READ" class="full_height">
				<div ng-if="$routeParams.type == 'books'" ng-model="user.books.read">
					<div ng-switch on="user.books.read.length">
						<div ng-switch-when="0">
							<div class="recommendation_block">
								<div class="widget mark_as_read_instruct">
									
								</div>
							</div>
						</div>
						<div ng-switch-default>
							<div ng-repeat="user_book in user.books.read" class="recommendation_block">
								<book track id="{{user_book.category.name | lowercase}}-{{user_book.id}}" data="user_book"></book>
							</div>
						</div>
					</div>
				</div>
				<div ng-if="$routeParams.type == 'authors'" ng-model="user.authors.follow">
					<div ng-switch on="user.authors.follow.length">
						<div ng-switch-when="0">
							Follow authors
						</div>
						<div ng-switch-default>
							<div ng-repeat="author in user.authors.follow" class="recommendation_block">
								<author track id="{{author.category.name | lowercase}}-{{author.id}}" data="author"></author>
							</div>
						</div>
					</div>
				</div>
				<div ng-if="$routeParams.type == 'readers'" ng-model="user.readers.follow">
					<div ng-switch on="user.readers.follow.length">
						<div ng-switch-when="0">
							Add Some readers to follow				
						</div>
						<div ng-switch-default>
							<div ng-repeat="reader in user.readers.follow" class="recommendation_block">
								<reader track id="{{reader.category.name | lowercase}}-{{reader.id}}" data="reader"></reader>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div ng-switch-default class="full_height">
				<div ng-if="$routeParams.type == 'books'" 
					ng-model="recommendations.books" class="full_height">
					<!-- <div class="recommendation_block"></div> -->
					<div ng-if="!grid_view">
						<div ng-repeat="recommendation in recommendations.books"
							 ng-class="{'recommendation_block': !recommendation.is_grid, 'grid': recommendation.is_grid}">
								<book track
									  id="{{recommendation.category.name | lowercase}}-{{recommendation.id}}" 
									  data="recommendation"
							 		  ng-if="!recommendation.is_grid"></book>
								<book-grid data="recommendation"
										   ng-if="recommendation.is_grid"></book-grid>
						</div>
						
						<div class="recommendation_block">
							<div class="widget loading_widget">
								<div class="loading_thumb"></div>
								<div class="loading_interaction_box">
									<div class="loading_bookmark">
									</div>
									<div class="loading_mark_as_read"></div>
								</div>
								<!-- <span ng-show="loading">loading..</span>
								<span ng-show="!loading"><div>SHOW</div><div>BOOKS</div></span> -->
							</div>
						</div>
					</div>

					<div ng-if="grid_view">
						<div ng-repeat="recommendation in recommendations.books"
							 ng-class="{'small_block': !recommendation.is_grid}">
								<img ng-src="{{recommendation.isbn | medium_thumb}}" class="" />
						</div>
					</div>

				</div>
				<div ng-if="$routeParams.type == 'readers'" 
					class="full_height">
					<div ng-repeat="recommendation in recommendations.readers" class="recommendation_block">
						<reader track id="{{recommendation.category.name | lowercase}}-{{recommendation.id}}" data="recommendation"></reader>
					</div>
				</div>
				<div ng-if="$routeParams.type == 'authors'" 
					class="full_height">
					<div ng-repeat="recommendation in recommendations.authors" class="recommendation_block">
						<author track id="{{recommendation.category.name | lowercase}}-{{recommendation.id}}" data="recommendation"></author>
					</div>
				</div>
			</div>
		</div>

		<div class="load_icon animate-slow"
		     ng-if="drop_icon">
			<img src="assets/preloader.gif" />
		</div>
		
		
		<!-- <message></message> -->
		<div class="expand_notifications" ng-class="{'expand_notifications_shift': user.collapsed_column}" ng-click="show_interaction_box()">
			<span class="icon-expand2"></span>
		</div>
		<div class="left_column animate-fast"
			 ng-class="{'left_column_collapsed': user.collapsed_column}">
			<div class="collapse_icon" ng-click="user.collapsed_column = !user.collapsed_column;" ng-if="!user.collapsed_column">
				<span class="icon-angle-left"></span>
			</div>
			<div ng-if="user.collapsed_column" class="animate-fast collapsed_column"
				ng-click="user.collapsed_column = false;">
				<div>
					<img ng-src="{{user.thumb | thumb_backup}}" class="thumb">
				</div>
				<!-- <div class="f3_background">
					<span class="icon-users2 light_grey_color"></span>
				</div> -->
			</div>
			<div class="scrollbar notifications animate-fast" 
				 ng-style="column_heights.notifications_style"
				 ng-if="show_notifications && !user.collapsed_column"
				 msd-wheel="handle_notification_ticker_size($event)"
				 check-scroll-bottom="get_notifications()"
				 check-scroll-down="handle_notification_ticker_size($event, true)">
				<div class="full_height">
					<notification data="notification" ng-repeat="notification in notifications | reverse"></notification>
					
					<div class="relative_position" ng-if="notifications.length == 0">
						<div class="notification_stable animate-fast">
							<div class="float_left instruct_block site">
								<span class="icon-book"></span>
							</div>
							<div class="block">
								<div class="notification_message">
									<b>Welcome to Reader's Door</b>
								</div>
								<div class="notification_message">
									Explore and find your next precious read like never before.
								</div>
							</div>
						</div>
					</div>
					
					<div class="relative_position" ng-if="notifications.length == 0">
						<div class="notification_stable animate-fast">
							<div class="float_left instruct_block green">
								<span class="icon-user22"></span>
							</div>
							<div class="block">
								<div class="notification_message">
									<b>Help us recommend you better</b>
								</div>
								<div class="notification_message">
									Rate, tag books, create virtual book shelves and tell us what you have read. 
								</div>
							</div>
						</div>
					</div>
				
					<div class="relative_position" ng-if="notifications.length == 0">
						<div class="notification_stable animate-fast">
							<div class="float_left instruct_icon purple_color">
								<span class="icon-cool2"></span>
							</div>
							<div class="block">
								<div class="notification_message">
									<b>Use arrow keys to scroll through books</b>
								</div>
								<div class="notification_message">
									<span class="icon-arrow-left keyboard_keys"></span>
									<span class="icon-arrow-right keyboard_keys"></span>
								</div>
							</div>
						</div>
					</div>
				
					<div class="relative_position" ng-if="notifications.length == 0">
						<div class="notification_stable animate-fast">
							<div class="float_left instruct_icon red_color">
								<span class="icon-bars"></span>
							</div>
							<div class="block">
								<div class="notification_message">
									<b>Explore books on trending topics</b>
								</div>
								
							</div>
						</div>
					</div>
					<!-- <div class="notification">News Feed</div> -->
					
					<div class="notification_stable">
						No new notifications.
					</div>
				</div>
			</div>
			<!-- <more-filters></more-filters> -->
			<div class="scrollbar friends_grid" 
				 ng-if="!user.collapsed_column"
				 ng-style="column_heights.friends_grid_style"
				 msd-wheel="handle_friends_grid_size($event)"
				 check-scroll-down="handle_friends_grid_size($event, true)">
				<div class="friends_grid_header"
					 ng-click="handle_friends_grid_size(undefined, true)">
					<span class="icon-users2"></span>
					<span>&nbsp;&nbsp;{{user.friends.length}} Friends</span>
				</div>
				<div ng-repeat="friend in user.friends" class="friend_block animate-fast">
					<img ng-src="{{friend.thumb}}" 
					     class="friend_thumb" />
					<div class="friend_details">
						<div><b>{{friend.name}}</b></div>
						<div class="light_grey_color" ng-show="friend.init_book_read_count">Reader of {{friend.init_book_read_count}}</div>
						<div class="light_grey_color">
							<span>{{friend.total_count | integer}}</span>
							<span> · </span>
							<span>{{friend.book_read_count | integer}}</span>
							<span class="icon-books"></span>
							<span> · </span>
							<span>{{friend.bookmark_count| integer}}</span>
							<span class="icon-bookmarks"></span>
							<span> · </span>
						</div>
						<div class="light_grey_color site_color" ng-show="friend.fav_categories">Likes {{friend.fav_categories}} books</div>
					</div>
				</div>
			</div>
			<!-- <div class="status site_color">What's on your mind?</div> -->
		</div>
		<!-- <div class="wrapper" ng-if="focused_book"></div> -->
		<div class="focused_tooltip animate-faster"
		     ng-style="focused_book.reposition_tooltip"
		     ng-click="stop_propagation($event)"
		     ng-if="focused_book">
		    <focused-book></focused-book>
		</div>
		<div class="ticker_popup animate-fast" 
			 ng-if="ticker_popup"
			 ng-style="ticker_popup_style"
			 msd-wheel="handle_height_of_popup($event)"
			 check-scroll-down="handle_height_of_popup($event, true)">
			<div class="scrollbar shift_right">
				<ticker-popup></ticker-popup>
			</div>
			<!-- <book-interact track></book-interact> -->
		</div>
		<div ng-if="focused_author"><focused-author></focused-author></div>
		<div ng-if="focused_reader"><focused-reader></focused-reader></div>

		<!-- <div class="bottom_hover_detector">
			<div class="progression_state" ng-style="progression_state"></div>
			<div ng-repeat="book in recommendations.books" class="progression_state_block" ng-style="block_style">{{$index+1}}</div>
		</div> -->
		<div class="top_hover_detector"></div>
	
		<div class="scroller">
			<span class="scroller-left icon-angle-left blue_button"
			      ng-mouseover="move_left($event)"
			      ng-click="move_left($event)"
			      title="Scroll left">
			</span>
			<span class="scroller-right icon-angle-right blue_button"
				  ng-mouseover="move_right($event)"
				  ng-click="move_right($event)"
				  title="Scroll right">
			</span>
		</div>

		<info-card></info-card>
		<div ng-include src="'/assets/angular/widgets/partials/settings_popup.html'" 
			 ng-show="user.settings_popup"></div>
</div>
<interaction-box ng-if="user.interact"></interaction-box>