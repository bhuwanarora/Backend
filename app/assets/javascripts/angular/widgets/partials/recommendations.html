<!-- <div class="go_left" ng-click="move_left()"></div>
<div class="go_right" ng-click="move_right()"></div> -->
<!-- <horizontal-scroller></horizontal-scroller> -->
<div feedback-popup></div>
<div msd-wheel="bindHorizontalScroll($event, $delta, $deltaX, $deltaY)" 
   ng-swipe-left="move_right($event)"
   ng-swipe-right="move_left($event)"
   ng-animate="msd-wheel"
   class="recommendations"
   style="height:100%; white-space:nowrap;"
   ng-controller="recommendationsController"
   ng-click="hide_popups()">
		<main-header></main-header>
		<recommendation-footer></recommendation-footer>
		<!-- <div class="status animate-fast" ng-click="show_interaction_box()">
			<span><input disabled placeholder="Share something..." /></span>
		</div> -->

		<div class="vertical_padder_active"></div>

		<!-- <div class="recommendations_page"><search-bar></search-bar></div> -->
		
		
		<div ng-class="{'horizontal_padder_active': !user.collapsed_column || !user.collapsed_filters || !user.collapsed_friends, 'horizontal_padder_inactive': user.collapsed_column && user.collapsed_filters && user.collapsed_friends}" 
			 class="info_card_placeholder animate-fast"></div>
		<div ng-switch on="panel_selected" class="full_height">
			<div ng-switch-when="BOOKMARK" class="full_height">
				<div ng-if="$routeParams.type == 'books'" ng-model="user.books.bookmarked">
					<div ng-switch on="user.books.bookmarked.length">
						<div ng-switch-when="0">
							<div class="recommendation_block">
								<div class="widget bookmark_instruct">
									
								</div>
							</div>
						</div>
						<div ng-switch-default>
							<div ng-repeat="user_book in user.books.bookmarked" class="recommendation_block">
								<book track id="{{user_book.category.name | lowercase}}-{{user_book.id}}" data="user_book"></book>
							</div>
						</div>
					</div>
				</div>
				<div ng-if="$routeParams.type == 'authors'" ng-model="user.authors.bookmarked">
					<div ng-switch on="user.authors.bookmarked.length">
						<div ng-switch-when="0">
							Bookmark authors
						</div>
						<div ng-switch-default>
							<div ng-repeat="author in user.authors.bookmarked" class="recommendation_block">
								<author track id="{{author.category.name | lowercase}}-{{author.id}}" data="author"></author>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div ng-switch-when="READ" class="full_height">
				<div ng-if="$routeParams.type == 'books'" ng-model="user.books.read">
					<div ng-switch on="user.books.read.length">
						<div ng-switch-when="0">
							<div class="recommendation_block">
								<div class="widget mark_as_read_instruct">
									
								</div>
							</div>
						</div>
						<div ng-switch-default>
							<div ng-repeat="user_book in user.books.read" class="recommendation_block">
								<book track id="{{user_book.category.name | lowercase}}-{{user_book.id}}" data="user_book"></book>
							</div>
						</div>
					</div>
				</div>
				<div ng-if="$routeParams.type == 'authors'" ng-model="user.authors.follow">
					<div ng-switch on="user.authors.follow.length">
						<div ng-switch-when="0">
							Follow authors
						</div>
						<div ng-switch-default>
							<div ng-repeat="author in user.authors.follow" class="recommendation_block">
								<author track id="{{author.category.name | lowercase}}-{{author.id}}" data="author"></author>
							</div>
						</div>
					</div>
				</div>
				<div ng-if="$routeParams.type == 'readers'" ng-model="user.readers.follow">
					<div ng-switch on="user.readers.follow.length">
						<div ng-switch-when="0">
							Add Some readers to follow				
						</div>
						<div ng-switch-default>
							<div ng-repeat="reader in user.readers.follow" class="recommendation_block">
								<reader track id="{{reader.category.name | lowercase}}-{{reader.id}}" data="reader"></reader>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div ng-switch-default class="full_height">
				<div ng-if="$routeParams.type == 'books'" 
					ng-model="recommendations.books" class="full_height">
					<!-- <div class="recommendation_block"></div> -->
					<div ng-if="!grid_view">
						<div ng-repeat="recommendation in recommendations.books"
							 ng-class="{'recommendation_block': !recommendation.is_grid, 'grid': recommendation.is_grid}">
								<book track
									  id="{{recommendation.category.name | lowercase}}-{{recommendation.id}}" 
									  data="recommendation"
							 		  ng-if="!recommendation.is_grid"></book>
								<book-grid data="recommendation"
										   ng-if="recommendation.is_grid"></book-grid>
								<div ng-if="recommendation.padding"></div>
						</div>
						
						<div class="recommendation_block"animate-fast >
							<div class="widget loading_widget">
								<div class="loading_thumb"></div>
								<div class="loading_interaction_box">
									<div class="loading_bookmark">
									</div>
									<div class="loading_mark_as_read"></div>
								</div>
								<!-- <span ng-show="loading">loading..</span>
								<span ng-show="!loading"><div>SHOW</div><div>BOOKS</div></span> -->
							</div>
						</div>
					</div>

					<div ng-if="grid_view">
						<div ng-repeat="recommendation in recommendations.books"
							 ng-class="{'small_block': !recommendation.is_grid}">
								<img ng-src="{{recommendation.isbn | medium_thumb}}" class="" />
						</div>
					</div>

				</div>
				<div ng-if="$routeParams.type == 'readers'" 
					class="full_height">
					<div ng-repeat="recommendation in recommendations.readers" class="recommendation_block" >
						<reader track id="{{recommendation.category.name | lowercase}}-{{recommendation.id}}" data="recommendation"></reader>
					</div>
				</div>
				<div ng-if="$routeParams.type == 'authors'" 
					class="full_height">
					<div ng-repeat="recommendation in recommendations.authors" class="recommendation_block">
						<author track id="{{recommendation.category.name | lowercase}}-{{recommendation.id}}" data="recommendation"></author>
					</div>
				</div>
			</div>
		</div>

		<div class="load_icon animate-slow"
		     ng-if="drop_icon">
			<img src="assets/preloader.gif" />
		</div>
		
		
		<!-- <message></message> -->
		
		<div ng-include src="'/assets/angular/widgets/partials/shelves.html'"></div>
		<div ng-include src="'/assets/angular/widgets/partials/news_feed.html'"></div>
		<div ng-include src="'/assets/angular/widgets/partials/friends_list.html'"></div>
		
		<!-- <div class="wrapper" ng-if="focused_book"></div> -->
		<div class="focused_tooltip animate-faster"
		     ng-style="focused_book.reposition_tooltip"
		     ng-click="stop_propagation($event)"
		     ng-if="focused_book">
		    <focused-book></focused-book>
		</div>
		<div class="ticker_popup animate-fast" 
			 ng-if="ticker_popup"
			 ng-style="ticker_popup_style"
			 msd-wheel="handle_height_of_popup($event)"
			 check-scroll-down="handle_height_of_popup($event, true)">
			<div class="scrollbar shift_right">
				<ticker-popup></ticker-popup>
			</div>
			<!-- <book-interact track></book-interact> -->
		</div>
		<div ng-if="focused_author"><focused-author></focused-author></div>
		<div ng-if="focused_reader"><focused-reader></focused-reader></div>

		<!-- <div class="bottom_hover_detector">
			<div class="progression_state" ng-style="progression_state"></div>
			<div ng-repeat="book in recommendations.books" class="progression_state_block" ng-style="block_style">{{$index+1}}</div>
		</div> -->
		<div class="top_hover_detector"></div>
	
		<div class="scroller">
			<span class="scroller-left icon-angle-left blue_button"
			      ng-mouseover="move_left($event)"
			      ng-click="move_left($event)"
			      title="Scroll left">
			</span>
			<span class="scroller-right icon-angle-right blue_button"
				  ng-mouseover="move_right($event)"
				  ng-click="move_right($event)"
				  title="Scroll right">
			</span>
		</div>

		<info-card></info-card>
		<div ng-include src="'/assets/angular/widgets/partials/settings_popup.html'" 
			 ng-show="user.settings_popup"></div>
</div>
<interaction-box ng-if="user.interact"></interaction-box>