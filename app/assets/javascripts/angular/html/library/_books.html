<md-whiteframe layout-fill>
    <div class="books_cover animate-very-fast"
         flex="60"
         flex-md="80"
         flex-sm="100"
         ng-if="constant.show_book"
         aria-label=""
         ng-click="show_grid($event)"
         layout="row"
         layout-align="start center">
        <div class="padding" layout="row">
            <div layout-padding><span class="icon-angle-left"></span></div>
            <div layout-padding>Back to Infinity</div>
        </div>
    </div>

    <md-progress-linear class="md-primary"
            ng-show="info.custom_loading"
            md-mode="indeterminate">
    </md-progress-linear>

    <div layout-padding class="white" ng-if="info.other_info && info.other_info.name">
        <a ng-href="/author?q={{info.other_info.id}}"><h3 ng-bind-html="info.other_info.name"></h3></a>
        <div ng-bind-html="info.other_info.overview"></div>
        <a ng-href="{{info.other_info.wiki_url}}" target="_blank">Read more at Wiki</a>
    </div>
    <md-divider ng-if="info.other_info"></md-divider>

    <!-- {{info.books}} -->
    <div ng-style="grid_style" class="white" 
            ng-if="!info.author_filter && !info.group_by_alphabet && !info.published_era_filter 
                && !info.reading_time_filter && !info.subject_filter" layout-fill layout-padding>
        <div>
            <div layout="row" layout-wrap layout-align="start">
                <div ng-repeat="book in info.books track by $index"
                    layout-margin
                    layout-align="start start"
                    layout="row"
                    class="md-button grid"
                    ng-class="{'book': book.isBook}" >
                    <md-button class="book_grid_link"
                            aria-label=""
                            ng-click="show_book($event, book)">
                        <img ng-src="{{book | choose_medium_thumb}}"/>
                    </md-button>
                    <div ng-style="{background:'{{book.color}}'}" class="book_backup_cover" 
                            layout="column" layout-padding layout-align="space-between">
                        <h3>{{book.title}}</h3>
                        <h5>{{book.author_name}}</h5>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div ng-if="info.author_filter && !info.group_by_alphabet && !info.published_era_filter 
                && !info.reading_time_filter && !info.subject_filter"
        ng-style="grid_style" class="white" >
        <div ng-repeat="(key, value) in info.books | groupBy: 'author_name'" layout-padding>
            <div ng-include src="'/assets/angular/html/library/shared/_grid.html'"></div>
        </div>
    </div>
   
    <div ng-if="info.group_by_alphabet && !info.author_filter && !info.published_era_filter 
            && !info.reading_time_filter && !info.subject_filter"
        ng-style="grid_style" class="white" >
        <div ng-repeat="(key, value) in info.books | groupBy: 'alphabet'" layout-padding>
            <div ng-include src="'/assets/angular/html/library/shared/_grid.html'"></div>
        </div>
    </div>

    <div ng-if="!info.group_by_alphabet && !info.author_filter && !info.published_era_filter 
                && info.reading_time_filter && !info.subject_filter"
        ng-style="grid_style" class="white" >
        <div ng-repeat="(key, value) in info.books | groupBy: 'reading_time'" layout-padding>
            <div ng-include src="'/assets/angular/html/library/shared/_grid.html'"></div>
        </div>
    </div>

    <div ng-if="!info.group_by_alphabet && !info.author_filter && info.published_era_filter 
                && !info.reading_time_filter && !info.subject_filter"
        ng-style="grid_style" class="white" >
        <div ng-repeat="(key, value) in info.books | groupBy: 'published_era'" layout-padding>
            <div ng-include src="'/assets/angular/html/library/shared/_grid.html'"></div>
        </div>
    </div>

    <div ng-if="!info.group_by_alphabet && !info.author_filter && !info.published_era_filter 
            && !info.reading_time_filter && info.subject_filter"
        ng-style="grid_style" class="white" >
        <div ng-repeat="category in info.categories" layout-padding>
            <h3>{{category.name}}</h3>
            <div layout="row" layout-wrap layout-align="start">
                <div ng-repeat="book in info.books | category_group: category"
                    layout-align="start start"
                    layout="row"
                    layout-margin
                    class="md-button grid"
                    ng-class="{'book': book.isBook}" >
                    <md-button class="book_grid_link"
                            aria-label=""
                            ng-click="show_book($event, book)">
                        <img ng-src="{{book | choose_medium_thumb}}" />
                    </md-button>
                    <div ng-style="{background:'{{book.color}}'}" class="book_backup_cover" 
                            layout="column" layout-padding layout-align="space-between">
                        <h3>{{book.title}}</h3>
                        <h5>{{book.author_name}}</h5>
                    </div>
                </div>
            </div>
        </div>
    </div>
</md-whiteframe>

<section ng-if="constant.show_book">
    <div ng-include src="'/assets/angular/html/book/show.html'" 
        class="animate-fast book"></div>
</section>

<style>

    .books_cover{
        background-color: #f5f5f5;
        position: absolute;
        z-index: 2;
        width: 60%;
        font-size: 13px;
        height: 43px;
        cursor: pointer;
    }

    .books_cover:hover{
        font-weight: bold;
    }

    .grid{
        width: 170px;
        height: 240px;
        margin: 10px !important;
    }

    .book_grid_link{
        position: absolute;
        height: 100%;
        width: 100%;
        left: 0px;
        padding: 0px;
        border-radius: 0px !important;
    }

    .book_grid_link img{
        width: 100%;
        height: 100%;
        z-index: 1;
        position: absolute;
        left: 0px;
        top: 0px;
    }

     .book_backup_cover{
        width: 100%;
        height: 100%;
        position: absolute;
        left: 0px;
        top: 0px;
        color: white;
        white-space: normal;
    }

</style>