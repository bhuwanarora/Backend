(function(e,t,n){"use strict";var r={};var i={sdk:false,ready:false};var s;t.module("facebook",[]).value("settings",r).value("flags",i).provider("Facebook",[function(){r.appId=null;this.setAppId=function(e){r.appId=e};this.getAppId=function(){return r.appId};r.locale="en_US";this.setLocale=function(e){r.locale=e};this.getLocale=function(){return r.locale};r.status=true;this.setStatus=function(e){r.status=e};this.getStatus=function(){return r.status};r.channelUrl=null;this.setChannel=function(e){r.channelUrl=e};this.getChannel=function(){return r.channelUrl};r.cookie=true;this.setCookie=function(e){r.cookie=e};this.getCookie=function(){return r.cookie};r.xfbml=true;this.setXfbml=function(e){r.xfbml=e};this.getXfbml=function(){return r.xfbml};r.authResponse=true;this.setAuthResponse=function(e){r.authResponse=e||true};this.getAuthResponse=function(){return r.authResponse};r.frictionlessRequests=false;this.setFrictionlessRequests=function(e){r.frictionlessRequests=e};this.getFrictionlessRequests=function(){return r.frictionlessRequests};r.hideFlashCallback=null;this.setHideFlashCallback=function(e){r.hideFlashCallback=e||null};this.getHideFlashCallback=function(){return r.hideFlashCallback};this.setInitCustomOption=function(e,n){if(!t.isString(e)){return false}r[e]=n;return r[e]};this.getInitOption=function(e){if(!t.isString(e)||!r.hasOwnProperty(e)){return false}return r[e]};r.loadSDK=true;this.setLoadSDK=function(e){r.loadSDK=!!e};this.getLoadSDK=function(){return r.loadSDK};this.init=function(e,n){if(t.isString(e)){r.appId=e||r.appId}if(t.isObject(e)){t.extend(r,e)}if(t.isDefined(n)){r.loadSDK=!!n}};this.$get=["$q","$rootScope","$timeout","$window",function(e,n,o,u){function a(){this.appId=r.appId}a.prototype.isReady=function(){return i.ready};t.forEach(["login","logout","api","ui","getLoginStatus"],function(n){a.prototype[n]=function(){var r=e.defer(),i=Array.prototype.slice.call(arguments),a,f;t.forEach(i,function(e,n){if(t.isFunction(e)){a=e;f=n}});if(t.isFunction(a)&&t.isNumber(f)){i.splice(f,1,function(e){o(function(){if(t.isUndefined(e.error)){r.resolve(e)}else{r.reject(e)}if(t.isFunction(a)){a(e)}})})}o(function(){s.promise.then(function(){u.FB[n].apply(FB,i)},function(){throw"Facebook API could not be initialized properly"})});return r.promise}});a.prototype.parseXFBML=function(){var t=e.defer();o(function(){s.promise.then(function(){u.FB.parse();t.resolve()},function(){throw"Facebook API could not be initialized properly"})});return t.promise};a.prototype.subscribe=function(){var n=e.defer(),r=Array.prototype.slice.call(arguments),i,a;t.forEach(r,function(e,n){if(t.isFunction(e)){i=e;a=n}});if(t.isFunction(i)&&t.isNumber(a)){r.splice(a,1,function(e){o(function(){if(t.isUndefined(e.error)){n.resolve(e)}else{n.reject(e)}if(t.isFunction(i)){i(e)}})})}o(function(){s.promise.then(function(){u.FB.Event.subscribe.apply(FB,r)},function(){throw"Facebook API could not be initialized properly"})});return n.promise};a.prototype.unsubscribe=function(){var n=e.defer(),r=Array.prototype.slice.call(arguments),i,a;t.forEach(r,function(e,n){if(t.isFunction(e)){i=e;a=n}});if(t.isFunction(i)&&t.isNumber(a)){r.splice(a,1,function(e){o(function(){if(t.isUndefined(e.error)){n.resolve(e)}else{n.reject(e)}if(t.isFunction(i)){i(e)}})})}o(function(){s.promise.then(function(){u.FB.Event.unsubscribe.apply(FB,r)},function(){throw"Facebook API could not be initialized properly"})});return n.promise};return new a}]}]).run(["$rootScope","$q","$window","$timeout",function(e,n,o,u){s=n.defer();var a=r.loadSDK;delete r["loadSDK"];o.fbAsyncInit=function(){u(function(){if(!r.appId){throw"Missing appId setting."}FB.init(r);i.ready=true;t.forEach({"auth.login":"login","auth.logout":"logout","auth.prompt":"prompt","auth.sessionChange":"sessionChange","auth.statusChange":"statusChange","auth.authResponseChange":"authResponseChange","xfbml.render":"xfbmlRender","edge.create":"like","edge.remove":"unlike","comment.create":"comment","comment.remove":"uncomment"},function(t,n){FB.Event.subscribe(n,function(n){u(function(){e.$broadcast("Facebook:"+t,n)})})});e.$broadcast("Facebook:load");s.resolve(FB)})};(function(){var t=document.getElementById("fb-root");if(!t){t=document.createElement("div");t.id="fb-root";document.body.insertBefore(t,document.body.childNodes[0])}return t})();if(a){(function(){var t="//connect.facebook.net/"+r.locale+"/all.js",n=document.createElement("script");n.id="facebook-jssdk";n.async=true;if(o.location.protocol==="file"){t="https:"+t}n.src=t;n.onload=function(){i.sdk=true};document.getElementsByTagName("head")[0].appendChild(n)})()}}])})(window,angular)