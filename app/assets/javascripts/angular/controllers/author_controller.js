homeApp.controller('authorController', ["$scope", "$location", "$mdSidenav", 'authorService', '$mdDialog', 'scroller', 'ColorConstants', function($scope, $location, $mdSidenav, authorService, $mdDialog, scroller, ColorConstants){

    $scope.show_buy_dialog = function(event){
        $mdDialog.show({
            templateUrl: 'assets/angular/html/author/buy.html',
            targetEvent: event,
        });
        event.stopPropagation();
    }

    $scope.close_dialog = function(){
        $mdDialog.hide();
    }

    $scope.next_block = function(){

    }

    $scope.previous_block = function(){

    }

    $scope.show_authors_nav = function(event){
        $mdSidenav('authors_detail_sidenav').toggle();
        event.stopPropagation();
    }

    _init = function(){
        var regex = /[?&]([^=#]+)=([^&#]*)/g;
        var id = regex.exec($location.absUrl())[2];
        authorService.get_details(id).then(function(data){
            $scope.author = data;
            $scope.author = {"books":[{"name":"@Geoffrey Chaucer","id":null,"wiki_url":"http://google.co.in/url?q=http://en.wikipedia.org/wiki/Geoffrey_Chaucer\u0026sa=U\u0026ei=oAT-UsnuKsWHrQf-rYCABg\u0026ved=0CCsQFjAG\u0026usg=AFQjCNFcp4ldIlWXSqfCeaDMUresjmhbbA","overview":null,"book_id":2304121,"isbn":null,"title":"The Prioress's Tale, the Tale of Sir Thopas","author_name":"@Geoffrey Chaucer","pages_count":null,"published_year":null,"popularity":9,"readers_count":"0","bookmark_count":"0","comment_count":"0","description":"This is a reproduction of a book published before 1923. This book may have occasional imperfections such as missing or blurred pages, poor pictures, errant marks, etc. that were either part of the original artifact, or were introduced by the scanning process. We believe this work is culturally important, and despite the imperfections, have elected to bring it back into print as part of our continuing commitment to the preservation of printed works worldwide. We appreciate your understanding of the imperfections in the preservation process, and hope you enjoy this valuable book.(less)","external_thumb":null},{"name":"@Geoffrey Chaucer","id":null,"wiki_url":"http://google.co.in/url?q=http://en.wikipedia.org/wiki/Geoffrey_Chaucer\u0026sa=U\u0026ei=oAT-UsnuKsWHrQf-rYCABg\u0026ved=0CCsQFjAG\u0026usg=AFQjCNFcp4ldIlWXSqfCeaDMUresjmhbbA","overview":null,"book_id":2269315,"isbn":null,"title":"The Pardoners Tale, the Frankeleyns Tale, the Nonne Preestes Tale: In Middle English","author_name":"@Geoffrey Chaucer","pages_count":null,"published_year":null,"popularity":0,"readers_count":"0","bookmark_count":"0","comment_count":"0","description":"These three tales from The Canterbury Tales are read in the original Middle English by Richard Bebb under the direction of Britain's foremost Chaucer scholar, Derek Brewer. The tales and their story-tellers display extraordinary variety and come from different sections of The Canterbury Tales. Chaucer's portrait of the Pardoner himself, laced with hostile satire, is as entertaining and revealing as the tale itself -- a search for a pot of gold during the plague. The Nonne Preestes Tale is different again and concerns faithfulness, love and magic. They are presented here in the original Middle English, but with the sense of drama and storytelling intact.(less)","external_thumb":null},{"name":"@Geoffrey Chaucer","id":null,"wiki_url":"http://google.co.in/url?q=http://en.wikipedia.org/wiki/Geoffrey_Chaucer\u0026sa=U\u0026ei=oAT-UsnuKsWHrQf-rYCABg\u0026ved=0CCsQFjAG\u0026usg=AFQjCNFcp4ldIlWXSqfCeaDMUresjmhbbA","overview":null,"book_id":2108197,"isbn":"0883880172,9780883880173","title":"Chaucer Coloring Book","author_name":"@Geoffrey Chaucer","pages_count":null,"published_year":"December 1972","popularity":10,"readers_count":"0","bookmark_count":"0","comment_count":"0","description":"Geoffrey Chaucer was born in London, the son of a wine-merchant. He fought in France, then went there and to Italy on diplomatic missions. His Canterbury Tales, begun in 1387, is one of the foundations stones of our literature and our language.This book is an  illustrated version of The prologue of the Tales of Canterbury; includes black and white reproductions from William Caxton's 1484 edition and Richard Pynson's 1526 edition. (less)","external_thumb":null},{"name":"@Geoffrey Chaucer","id":null,"wiki_url":"http://google.co.in/url?q=http://en.wikipedia.org/wiki/Geoffrey_Chaucer\u0026sa=U\u0026ei=oAT-UsnuKsWHrQf-rYCABg\u0026ved=0CCsQFjAG\u0026usg=AFQjCNFcp4ldIlWXSqfCeaDMUresjmhbbA","overview":null,"book_id":2104683,"isbn":null,"title":"The story of Queen Anelida and the false Arcite","author_name":"@Geoffrey Chaucer","pages_count":null,"published_year":"November 5th 2009","popularity":0,"readers_count":"0","bookmark_count":"0","comment_count":"0","description":null,"external_thumb":null},{"name":"@Geoffrey Chaucer","id":null,"wiki_url":"http://google.co.in/url?q=http://en.wikipedia.org/wiki/Geoffrey_Chaucer\u0026sa=U\u0026ei=oAT-UsnuKsWHrQf-rYCABg\u0026ved=0CCsQFjAG\u0026usg=AFQjCNFcp4ldIlWXSqfCeaDMUresjmhbbA","overview":null,"book_id":2101474,"isbn":"0460882201,9780460882200","title":"Three Tales of Love \u0026 Chivalry Eman Poet Lib #74","author_name":"@Geoffrey Chaucer","pages_count":null,"published_year":null,"popularity":4,"readers_count":"0","bookmark_count":"0","comment_count":"0","description":"Whilom, as olde stories tellen us, There was a duc that highte Theseus; Of Atthenes he was lord and governour...So begins the first tale in this delightful volume of romance and adventure. This unique collection presents three selections -- \"The Night's Tale\", \"The Squire's Tale\", and \"The Franklin's Tale\" -- from Chaucer's most popular text, The Canterbury Tales. A compact collection, these three tales are the perfect introduction to Chaucer's beloved work.(less)","external_thumb":null},{"name":"@Geoffrey Chaucer","id":null,"wiki_url":"http://google.co.in/url?q=http://en.wikipedia.org/wiki/Geoffrey_Chaucer\u0026sa=U\u0026ei=oAT-UsnuKsWHrQf-rYCABg\u0026ved=0CCsQFjAG\u0026usg=AFQjCNFcp4ldIlWXSqfCeaDMUresjmhbbA","overview":null,"book_id":384295,"isbn":"0140424385,9780140424386","title":"The Canterbury Tales","author_name":"@Geoffrey Chaucer","pages_count":null,"published_year":"1390","popularity":38391,"readers_count":"0","bookmark_count":"0","comment_count":"0","description":"The procession that crosses Chaucer's pages is as full of life and as richly textured as a medieval tapestry. The Knight, the Miller, the Friar, the Squire, the Prioress, the Wife of Bath, and others who make up the cast of characters -- including Chaucer himself -- are real people, with human emotions and weaknesses. When it is remembered that Chaucer wrote in English at a time when Latin was the standard literary language across western Europe, the magnitude of his achievement is even more remarkable. But Chaucer's genius needs no historical introduction; it bursts forth from every page of The Canterbury Tales.If we trust the General Prologue, Chaucer intended that each pilgrim should tell two tales on the way to Canterbury and two tales on the way back. He never finished his enormous project and even the completed tales were not finally revised. Scholars are uncertain about the order of the tales. As the printing press had yet to be invented when Chaucer wrote his works, The Canterbury Tales has been passed down in several handwritten manuscripts.(less)","external_thumb":null},{"name":"@Geoffrey Chaucer","id":null,"wiki_url":"http://google.co.in/url?q=http://en.wikipedia.org/wiki/Geoffrey_Chaucer\u0026sa=U\u0026ei=oAT-UsnuKsWHrQf-rYCABg\u0026ved=0CCsQFjAG\u0026usg=AFQjCNFcp4ldIlWXSqfCeaDMUresjmhbbA","overview":null,"book_id":384979,"isbn":"0395290317,9780395290316","title":"The Riverside Chaucer","author_name":"@Geoffrey Chaucer","pages_count":null,"published_year":"1896","popularity":2976201,"readers_count":"0","bookmark_count":"0","comment_count":"0","description":"NA","external_thumb":null},{"name":"@Geoffrey Chaucer","id":null,"wiki_url":"http://google.co.in/url?q=http://en.wikipedia.org/wiki/Geoffrey_Chaucer\u0026sa=U\u0026ei=oAT-UsnuKsWHrQf-rYCABg\u0026ved=0CCsQFjAG\u0026usg=AFQjCNFcp4ldIlWXSqfCeaDMUresjmhbbA","overview":null,"book_id":384991,"isbn":null,"title":"The Knight's Tale","author_name":"@Geoffrey Chaucer","pages_count":null,"published_year":null,"popularity":9092,"readers_count":"0","bookmark_count":"0","comment_count":"0","description":null,"external_thumb":null},{"name":"@Geoffrey Chaucer","id":null,"wiki_url":"http://google.co.in/url?q=http://en.wikipedia.org/wiki/Geoffrey_Chaucer\u0026sa=U\u0026ei=oAT-UsnuKsWHrQf-rYCABg\u0026ved=0CCsQFjAG\u0026usg=AFQjCNFcp4ldIlWXSqfCeaDMUresjmhbbA","overview":null,"book_id":384992,"isbn":null,"title":"The Wife of Bath","author_name":"@Geoffrey Chaucer","pages_count":null,"published_year":"1372","popularity":42271,"readers_count":"0","bookmark_count":"0","comment_count":"0","description":"Adopted at more than 1,000 colleges and universities, Bedford/St. Martin's innovative Case Studies in Contemporary Criticism series has introduced more than a quarter of a million students to literary theory and earned enthusiastic praise nationwide. Along with an authoritative text of a major literary work, each volume presents critical essays, selected or prepared especially for students, that approach the work from several contemporary critical perspectives, such as gender criticism and cultural studies. Each essay is accompanied by an introduction (with bibliography) to the history, principles, and practice of its critical perspective. Every volume also surveys the biographical, historical, and critical contexts of the literary work and concludes with a glossary of critical terms. New editions reprint cultural documents that contextualize the literary works and feature essays that show how critical perspectives can be combined.(less)","external_thumb":null},{"name":"@Geoffrey Chaucer","id":null,"wiki_url":"http://google.co.in/url?q=http://en.wikipedia.org/wiki/Geoffrey_Chaucer\u0026sa=U\u0026ei=oAT-UsnuKsWHrQf-rYCABg\u0026ved=0CCsQFjAG\u0026usg=AFQjCNFcp4ldIlWXSqfCeaDMUresjmhbbA","overview":null,"book_id":384993,"isbn":null,"title":"The Miller's Tale","author_name":"@Geoffrey Chaucer","pages_count":null,"published_year":"1372","popularity":714,"readers_count":"6","bookmark_count":"0","comment_count":"0","description":"\"Chaucer made easy!\"Geoffrey Chaucerâ€™s â€œThe Millerâ€™s Prologue and Taleâ€ , from The Canterbury Tales, clearly translated into Modern English, while faithfully interpreting and preserving the flowing structure of the original medieval text.On a journey with his fellow pilgrims to Canterbury Cathedral, Robin, a drunken miller, tells an earthy but imaginative story of how the beautiful young wife of a middle-aged carpenter is seduced by Nicholas, a clever but cunning scholar.To continue their sexual relationship, Nicholas devises a ludicrous plan to keep the affair secret from not only the suspicious husband but also his rival, a well-mannered but equally lecherous parish clerk.â€œThe Millerâ€™s Taleâ€ is stuffed with drama, crudeness and hilarity, and is Chaucer at his most outrageous.Contains strong language.Reviewsâ€œThe perfect introduction to Chaucer, brilliantly capturing his unique style for the modern reader.â€ JS Hayer, The Supplement.â€œChaucerâ€™s masterpiece clearly translated and easily understood. Ideal for students.â€ M. Collins PhD.Penbury Press, 2013.(less)","external_thumb":null}],"name":"@Geoffrey Chaucer","id":"384296","overview":null,"wiki_url":"http://google.co.in/url?q=http://en.wikipedia.org/wiki/Geoffrey_Chaucer\u0026sa=U\u0026ei=oAT-UsnuKsWHrQf-rYCABg\u0026ved=0CCsQFjAG\u0026usg=AFQjCNFcp4ldIlWXSqfCeaDMUresjmhbbA"};
            angular.forEach($scope.author.books, function(value, index){
                var random_int = Math.floor(Math.random()*ColorConstants.value.length);
                var json =  {"color": ColorConstants.value[random_int]};
                $scope.author.books[index] = angular.extend($scope.author.books[index], json);
            });
            $scope.custom_color = {'background-color': $scope.author.books[0].color};
        });
    }

    _init();

}]);